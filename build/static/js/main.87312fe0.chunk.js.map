{"version":3,"sources":["Store.tsx","nav.tsx","Utilities.ts","AVL/AVLData.ts","ErrorInformation.tsx","UnitOptions.tsx","UnitHistory.ts","UnitHistoryList.tsx","AVL/AVL.tsx","AVL/AVLList.tsx","FleetComplete/FleetCompleteData.ts","FleetComplete/FC.tsx","FleetComplete/FCList.tsx","Cad/CADData.ts","Cad/CAD.tsx","Cad/CADList.tsx","Unit/UnitData.ts","Unit/UnitControls.tsx","Unit/Unit.tsx","Unit/AddUnit.tsx","Unit/UnitList.tsx","Map/AVLLayer.tsx","Map/FCLayer.tsx","Map/CADLayer.tsx","Map/WebMapView.tsx","SimpleValue.ts","App.tsx","index.tsx"],"names":["initialState","map","map_view","unit_groups","current_view","avl_data","Array","fc_data","cad_data","unit_data","filtered_avl_data","filtered_fc_data","filtered_cad_data","filtered_unit_data","avl_data_filter","fc_data_filter","cad_data_filter","unit_data_filter","avl_data_sort_field","fc_data_sort_field","cad_data_sort_field","unit_data_sort_field","avl_data_sort_ascending","fc_data_sort_ascending","cad_data_sort_ascending","unit_data_sort_ascending","avl_data_special_filter","fc_data_special_filter","cad_data_special_filter","unit_data_special_filter","Store","React","createContext","reducer","state","action","type","payload","process_avl","process_fc","process_cad","process_unit","showAVLHistory","a","device_id","device_history","showFCHistory","showCADHistory","unitcode","showUnitHistory","filtered","sort","filterFC","filterCAD","filterUnit","showAVLError","show_errors","showFCError","showCADError","showUnitError","showAVLUO","show_unit_options","showFCUO","showUnitControls","special_filter","array","specialFilter","length","filter","d","error_information","has_asset_tag_error","has_date_error","has_location_error","has_unit_error","has_cad_error","has_avl_error","has_fc_error","field","ascending","indexOf","b","Date","sort_dates","arrayToFilter","filterUsing","f","toLowerCase","j","filter_avl","asset_tag","filter_fc","filter_cad","group_label","using_unit","filter_unit","Nav","useContext","dispatch","closeBaseMapDropdown","e","document","getElementById","classList","remove","className","role","aria-label","onClick","event","style","paddingRight","id","isActive","contains","querySelectorAll","forEach","removeEventListener","addEventListener","toggle","Get","url","async","fetch","method","headers","cache","credentials","response","ok","Error","statusText","json","Post_Empty","data","body","JSON","stringify","Format_DateTime","date","toLocaleString","AVLData","device_type","direction","location_timestamp","satellite_count","velocity","latitude","longitude","updated_on","ErrorInformation","props","colSpan","colspan","errorText","index","key","UnitOptions","useState","currentUnit","setCurrentUnit","onChange","target","value","placeholder","preventDefault","console","log","update_data","trim","UnitHistory","changed_from","changed_to","changed_on","changed_by","error_message","UnitHistoryList","history","title","h","AVL","fetchAVLData","GetByDeviceId","deviceHistory","Delete","alert","new_unitcode","current_unit","Update","AVLList","currentSearch","setCurrentSearch","padding","marginBottom","onKeyDown","stopPropagation","marginLeft","href","avl","FleetCompleteData","vin","make","model","vehicle_year","FC","fetchFCData","replace","FCList","width","fc","CADData","inci_id","status","avstatus","speed","heading","CAD","fetchCADData","CADList","cad","UnitData","show_in_minicad","avl_longitude","avl_latitude","avl_location_timestamp","has_avl_device","fc_longitude","fc_latitude","fc_location_timestamp","has_fc_device","cad_longitude","cad_latitude","cad_location_timestamp","should_have_cad_location","group","has_avl","has_fc","should_have_cad","UnitControls","label","v","g","getGroupValue","setGroup","hasAVL","setHasAVL","hasFC","setHasFC","hasCAD","setHasCAD","checked","refresh_data","Unit","fetchUnitData","getFullYear","GetByUnit","AddUnit","show_add_unit","Add","cancel","UnitList","showAddUnit","setShowAddUnit","display","currentOption","options","selectedIndex","innerText","u","AVLLayer","avlLayer","setAVLLayer","useEffect","loadModules","then","GraphicsLayer","Graphic","layer","graphics","removeAll","point","symbolGraphic","geometry","symbol","color","textGraphic","halo","haloSize","xoffset","yoffset","text","horizontalAlignment","font","size","add","catch","err","error","FCLayer","fcLayer","setFCLayer","CADLayer","cadLayer","setCADLayer","WebMapView","mapRef","useRef","css","ArcGISMap","MapView","BasemapGallery","LayerList","Home","basemap","view","container","current","center","zoom","homeWidget","source","portal","useVectorBasemaps","ui","position","when","ref","SimpleValue","App","fetchUnitGroups","GetUnitGroups","paddingLeft","ReactDOM","render","useReducer","Provider","children"],"mappings":"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","file":"static/js/main.87312fe0.chunk.js","sourcesContent":["import React, { useReducer } from 'react';\r\nimport { IState, IAction } from './interfaces';\r\nimport AVLData from './AVL/AVLData';\r\nimport FleetCompleteData from './FleetComplete/FleetCompleteData';\r\nimport CADData from './Cad/CADData';\r\nimport UnitData from './Unit/UnitData';\r\n\r\nconst initialState: IState =\r\n{\r\n  map: null,\r\n  map_view: null,\r\n\r\n  unit_groups: [],\r\n  current_view: \"unit\",\r\n\r\n  avl_data: new Array<AVLData>(),\r\n  fc_data: new Array<FleetCompleteData>(),\r\n  cad_data: new Array<CADData>(),\r\n  unit_data: new Array<UnitData>(),\r\n\r\n  filtered_avl_data: new Array<AVLData>(),\r\n  filtered_fc_data: new Array<FleetCompleteData>(),\r\n  filtered_cad_data: new Array<CADData>(),\r\n  filtered_unit_data: new Array<UnitData>(),\r\n\r\n  avl_data_filter: \"\",\r\n  fc_data_filter: \"\",\r\n  cad_data_filter: \"\",\r\n  unit_data_filter: \"\",\r\n\r\n  avl_data_sort_field: \"device_id\",\r\n  fc_data_sort_field: \"device_id\",\r\n  cad_data_sort_field: \"unitcode\",\r\n  unit_data_sort_field: \"unitcode\",\r\n\r\n  avl_data_sort_ascending: true,\r\n  fc_data_sort_ascending: true,\r\n  cad_data_sort_ascending: true,\r\n  unit_data_sort_ascending: true,\r\n\r\n  avl_data_special_filter: \"\",\r\n  fc_data_special_filter: \"\",\r\n  cad_data_special_filter: \"\",\r\n  unit_data_special_filter: \"\"\r\n}\r\n\r\nexport const Store = React.createContext<IState | any>(initialState);\r\n\r\nfunction reducer(state: IState, action: IAction): IState\r\n{\r\n  switch (action.type)\r\n  {\r\n\r\n    case \"save_map\":\r\n      return {\r\n        ...state,\r\n        map: action.payload\r\n      }\r\n\r\n    case \"save_map_view\":\r\n      return {\r\n        ...state,\r\n        map_view: action.payload\r\n      }\r\n\r\n    case \"get_unit_groups_data\":\r\n      return {\r\n        ...state,\r\n        unit_groups: action.payload\r\n      }\r\n\r\n    case \"set_current_view\":\r\n      return {\r\n        ...state,\r\n        current_view: action.payload\r\n      }\r\n\r\n    case \"view_avl_by_unit\":\r\n      return {\r\n        ...state,\r\n        current_view: 'avl',        \r\n        filtered_avl_data:\r\n          process_avl(\r\n            state.avl_data,\r\n            action.payload,\r\n            state.avl_data_sort_field,\r\n            state.avl_data_sort_ascending,\r\n            state.avl_data_special_filter),\r\n        avl_data_special_filter: '',\r\n        avl_data_filter: action.payload\r\n      }\r\n\r\n    case \"view_fc_by_unit\":\r\n      return {\r\n        ...state,\r\n        current_view: 'fc',\r\n        filtered_fc_data:\r\n          process_fc(\r\n            state.fc_data,\r\n            action.payload,\r\n            state.fc_data_sort_field,\r\n            state.fc_data_sort_ascending,\r\n            state.fc_data_special_filter),\r\n        fc_data_special_filter: '',\r\n        fc_data_filter: action.payload\r\n      }\r\n\r\n    case \"view_cad_by_unit\":\r\n      return {\r\n        ...state,\r\n        current_view: 'cad',\r\n        filtered_cad_data:\r\n          process_cad(\r\n            state.cad_data,\r\n            action.payload,\r\n            state.cad_data_sort_field,\r\n            state.cad_data_sort_ascending,\r\n            state.cad_data_special_filter),\r\n        cad_data_special_filter: '',\r\n        cad_data_filter: action.payload\r\n      }\r\n\r\n    case \"get_avl_data\":\r\n      return {\r\n        ...state,\r\n        avl_data: action.payload,\r\n        filtered_avl_data:\r\n          process_avl(\r\n            action.payload,\r\n            state.avl_data_filter,\r\n            state.avl_data_sort_field,\r\n            state.avl_data_sort_ascending,\r\n            state.avl_data_special_filter)\r\n      };\r\n\r\n    case \"get_fc_data\":\r\n      return {\r\n        ...state,\r\n        fc_data: action.payload,\r\n        filtered_fc_data:\r\n          process_fc(\r\n            action.payload,\r\n            state.fc_data_filter,\r\n            state.fc_data_sort_field,\r\n            state.fc_data_sort_ascending,\r\n            state.fc_data_special_filter)\r\n      };\r\n\r\n    case \"get_cad_data\":\r\n      return {\r\n        ...state,\r\n        cad_data: action.payload,\r\n        filtered_cad_data:\r\n          process_fc(\r\n            action.payload,\r\n            state.cad_data_filter,\r\n            state.cad_data_sort_field,\r\n            state.cad_data_sort_ascending,\r\n            state.cad_data_special_filter)\r\n      };\r\n\r\n    case \"get_unit_data\":\r\n      return {\r\n        ...state,\r\n        unit_data: action.payload,\r\n        filtered_unit_data:\r\n          process_unit(\r\n            action.payload,\r\n            state.unit_data_filter,\r\n            state.unit_data_sort_field,\r\n            state.unit_data_sort_ascending,\r\n            state.unit_data_special_filter)\r\n      };\r\n\r\n    case \"search_avl_data\":\r\n      return {\r\n        ...state,\r\n        filtered_avl_data:\r\n          process_avl(\r\n            state.avl_data,\r\n            action.payload,\r\n            state.avl_data_sort_field,\r\n            state.avl_data_sort_ascending,\r\n            state.avl_data_special_filter),\r\n        avl_data_filter: action.payload\r\n      };\r\n\r\n    case \"search_fc_data\":\r\n      return {\r\n        ...state,\r\n        filtered_fc_data:\r\n          process_fc(\r\n            state.fc_data,\r\n            action.payload,\r\n            state.fc_data_sort_field,\r\n            state.fc_data_sort_ascending,\r\n            state.fc_data_special_filter),\r\n        fc_data_filter: action.payload\r\n      };\r\n\r\n    case \"search_cad_data\":\r\n      return {\r\n        ...state,\r\n        filtered_cad_data:\r\n          process_cad(\r\n            state.cad_data,\r\n            action.payload,\r\n            state.cad_data_sort_field,\r\n            state.cad_data_sort_ascending,\r\n            state.cad_data_special_filter),\r\n        cad_data_filter: action.payload\r\n      };\r\n\r\n    case \"search_unit_data\":\r\n      return {\r\n        ...state,\r\n        filtered_unit_data:\r\n          process_unit(\r\n            state.unit_data,\r\n            action.payload,\r\n            state.unit_data_sort_field,\r\n            state.unit_data_sort_ascending,\r\n            state.unit_data_special_filter),\r\n        unit_data_filter: action.payload\r\n      };\r\n\r\n    case \"avl_device_history\":\r\n      let showAVLHistory = state.filtered_avl_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload.device_id)\r\n        {\r\n          a.device_history = action.payload.device_history;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_avl_data: showAVLHistory\r\n      };\r\n\r\n    case \"fc_device_history\":\r\n      let showFCHistory = state.filtered_fc_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload.device_id)\r\n        {\r\n          a.device_history = action.payload.device_history;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_fc_data: showFCHistory\r\n      };\r\n\r\n    case \"cad_device_history\":\r\n      let showCADHistory = state.filtered_cad_data.map(a =>\r\n      {\r\n        if (a.unitcode === action.payload.unitcode)\r\n        {\r\n          a.device_history = action.payload.device_history;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_cad_data: showCADHistory\r\n      };\r\n\r\n    case \"unit_device_history\":\r\n      let showUnitHistory = state.filtered_unit_data.map(a =>\r\n      {\r\n        if (a.unitcode === action.payload.unitcode)\r\n        {\r\n          a.device_history = action.payload.device_history;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_unit_data: showUnitHistory\r\n      };\r\n\r\n\r\n    case \"avl_data_special_filter\":\r\n      return {\r\n        ...state,\r\n        filtered_avl_data: process_avl(state.avl_data, state.avl_data_filter, state.avl_data_sort_field, state.avl_data_sort_ascending, action.payload),\r\n        avl_data_special_filter: action.payload\r\n      };\r\n\r\n    case \"fc_data_special_filter\":\r\n      return {\r\n        ...state,\r\n        filtered_fc_data: process_fc(state.fc_data, state.fc_data_filter, state.fc_data_sort_field, state.fc_data_sort_ascending, action.payload),\r\n        fc_data_special_filter: action.payload\r\n      };\r\n\r\n    case \"cad_data_special_filter\":\r\n      return {\r\n        ...state,\r\n        filtered_cad_data: process_cad(state.cad_data, state.cad_data_filter, state.cad_data_sort_field, state.cad_data_sort_ascending, action.payload),\r\n        cad_data_special_filter: action.payload\r\n      };\r\n\r\n    case \"unit_data_special_filter\":\r\n      return {\r\n        ...state,\r\n        filtered_unit_data: process_cad(state.unit_data, state.unit_data_filter, state.unit_data_sort_field, state.unit_data_sort_ascending, action.payload),\r\n        unit_data_special_filter: action.payload\r\n      };\r\n\r\n    case \"avl_data_sort\":\r\n      let filtered = sort(state.filtered_avl_data, action.payload, !state.avl_data_sort_ascending);\r\n      return {\r\n        ...state,\r\n        filtered_avl_data: filtered,\r\n        avl_data_sort_field: action.payload,\r\n        avl_data_sort_ascending: !state.avl_data_sort_ascending\r\n      };\r\n\r\n    case \"fc_data_sort\":\r\n      let filterFC = sort(state.filtered_fc_data, action.payload, !state.fc_data_sort_ascending);\r\n      return {\r\n        ...state,\r\n        filtered_fc_data: filterFC,\r\n        fc_data_sort_field: action.payload,\r\n        fc_data_sort_ascending: !state.fc_data_sort_ascending\r\n      };\r\n\r\n    case \"cad_data_sort\":\r\n      let filterCAD = sort(state.filtered_cad_data, action.payload, !state.cad_data_sort_ascending);\r\n      return {\r\n        ...state,\r\n        filtered_cad_data: filterCAD,\r\n        cad_data_sort_field: action.payload,\r\n        cad_data_sort_ascending: !state.cad_data_sort_ascending\r\n      };\r\n\r\n    case \"unit_data_sort\":\r\n      let filterUnit = sort(state.filtered_unit_data, action.payload, !state.unit_data_sort_ascending);\r\n      return {\r\n        ...state,\r\n        filtered_unit_data: filterUnit,\r\n        unit_data_sort_field: action.payload,\r\n        unit_data_sort_ascending: !state.unit_data_sort_ascending\r\n      };\r\n\r\n    case \"avl_data_toggle_show_errors\":\r\n      let showAVLError = state.filtered_avl_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload)\r\n        {\r\n          a.show_errors = !a.show_errors;\r\n        }\r\n        return a;\r\n      });\r\n      return {\r\n        ...state,\r\n        filtered_avl_data: showAVLError\r\n      };\r\n\r\n    case \"fc_data_toggle_show_errors\":\r\n      let showFCError = state.filtered_fc_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload)\r\n        {\r\n          a.show_errors = !a.show_errors;\r\n        }\r\n        return a;\r\n      });\r\n      return {\r\n        ...state,\r\n        filtered_fc_data: showFCError\r\n      };\r\n\r\n    case \"cad_data_toggle_show_errors\":\r\n      let showCADError = state.filtered_cad_data.map(a =>\r\n      {\r\n        if (a.unitcode === action.payload)\r\n        {\r\n          a.show_errors = !a.show_errors;\r\n        }\r\n        return a;\r\n      });\r\n      return {\r\n        ...state,\r\n        filtered_cad_data: showCADError\r\n      };\r\n\r\n    case \"unit_data_toggle_show_errors\":\r\n      let showUnitError = state.filtered_unit_data.map(a =>\r\n      {\r\n        if (a.unitcode === action.payload)\r\n        {\r\n          a.show_errors = !a.show_errors;\r\n        }\r\n        return a;\r\n      });\r\n      return {\r\n        ...state,\r\n        filtered_unit_data: showUnitError\r\n      };\r\n\r\n    case \"avl_data_toggle_show_unit_options\":\r\n      let showAVLUO = state.filtered_avl_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload)\r\n        {\r\n          a.show_unit_options = !a.show_unit_options;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_avl_data: showAVLUO\r\n      };\r\n\r\n    case \"fc_data_toggle_show_unit_options\":\r\n      let showFCUO = state.filtered_fc_data.map(a =>\r\n      {\r\n        if (a.device_id === action.payload)\r\n        {\r\n          a.show_unit_options = !a.show_unit_options;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_fc_data: showFCUO\r\n      };\r\n\r\n    case \"unit_data_toggle_show_unit_options\":\r\n      let showUnitControls = state.filtered_unit_data.map(a =>\r\n      {\r\n        if (a.unitcode === action.payload)\r\n        {\r\n          a.show_unit_options = !a.show_unit_options;\r\n        }\r\n        return a;\r\n      });\r\n\r\n      return {\r\n        ...state,\r\n        filtered_unit_data: showUnitControls\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction filter_avl(arrayToFilter:Array<AVLData>, filterUsing:string): Array<AVLData>\r\n{\r\n  if (filterUsing.length === 0) return arrayToFilter;\r\n  let f = filterUsing.toLowerCase();\r\n  let filtered = arrayToFilter.filter(j =>\r\n  {\r\n    return j.device_id.toLowerCase().indexOf(f) > -1 ||\r\n      j.unitcode.toLowerCase().indexOf(f) > -1;\r\n  });\r\n  return filtered;\r\n}\r\n\r\nfunction filter_fc(arrayToFilter: Array<FleetCompleteData>, filterUsing: string): Array<FleetCompleteData>\r\n{\r\n  if (filterUsing.length === 0) return arrayToFilter;\r\n  let f = filterUsing.toLowerCase();\r\n  let filtered = arrayToFilter.filter(j =>\r\n  {\r\n    return j.device_id.toLowerCase().indexOf(f) > -1 ||\r\n      j.unitcode.toLowerCase().indexOf(f) > -1 || \r\n      j.asset_tag.toLowerCase().indexOf(f) > -1;\r\n  });\r\n  return filtered;\r\n}\r\n\r\nfunction filter_cad(arrayToFilter: Array<FleetCompleteData>, filterUsing: string): Array<FleetCompleteData>\r\n{\r\n  if (filterUsing.length === 0) return arrayToFilter;\r\n  let f = filterUsing.toLowerCase();\r\n  let filtered = arrayToFilter.filter(j =>\r\n  {\r\n    return j.unitcode.toLowerCase().indexOf(f) > -1;\r\n  });\r\n  return filtered;\r\n}\r\n\r\nfunction filter_unit(arrayToFilter: Array<UnitData>, filterUsing: string): Array<UnitData>\r\n{\r\n  if (filterUsing.length === 0) return arrayToFilter;\r\n  let f = filterUsing.toLowerCase();\r\n  let filtered = arrayToFilter.filter(j =>\r\n  {\r\n    return j.unitcode.toLowerCase().indexOf(f) > -1 ||\r\n      j.group_label.toLowerCase().indexOf(f) > -1 ||\r\n      j.using_unit.toLowerCase().indexOf(f) > -1;\r\n  });\r\n  return filtered;\r\n}\r\n\r\nfunction special_filter(array: Array<any>, specialFilter: string): Array<any>\r\n{\r\n  if (specialFilter.length === 0) return array;\r\n  switch (specialFilter)\r\n  {\r\n    case \"error\":\r\n      let filtered = array.filter(d => d.error_information.length > 0);\r\n      return filtered;\r\n\r\n    case \"asset_tag\":\r\n      return array.filter(d => d.has_asset_tag_error);\r\n\r\n    case \"date\":\r\n      return array.filter(d => d.has_date_error);\r\n\r\n    case \"location\":\r\n      return array.filter(d => d.has_location_error);\r\n\r\n    case \"unit\":\r\n      return array.filter(d => d.has_unit_error);\r\n\r\n    case \"cad\":\r\n      return array.filter(d => d.has_cad_error);\r\n\r\n    case \"avl\":\r\n      return array.filter(d => d.has_avl_error);\r\n\r\n    case \"fc\":\r\n      return array.filter(d => d.has_fc_error);\r\n\r\n    default:\r\n      return array;\r\n  }  \r\n}\r\n\r\nfunction sort(array: Array<any>, field: string, ascending: boolean) : Array<any>\r\n{\r\n  const date_fields = ['updated_on', 'location_timestamp'];\r\n  if (date_fields.indexOf(field) > -1) return sort_dates(array, field, ascending);\r\n  let sorted = array.sort((a, b) =>\r\n  {\r\n    if (a[field] > b[field]) return ascending ? 1 : -1;\r\n    if (b[field] > a[field]) return ascending ? -1 : 1;\r\n    return 0;\r\n  });\r\n  return sorted;\r\n}\r\n\r\nfunction sort_dates(array: Array<any>, field: string, ascending: boolean): Array<any>\r\n{\r\n  let sorted = array.sort((a, b) =>\r\n  {\r\n    if (new Date(a[field]) > new Date(b[field])) return ascending ? 1 : -1;\r\n    if (new Date(b[field]) > new Date(a[field])) return ascending ? -1 : 1;\r\n    return 0;\r\n  });\r\n  return sorted;\r\n}\r\n\r\nfunction process_avl(array: Array<any>, filter: string, field: string, ascending: boolean, specialFilter: string)\r\n{\r\n  let filtered = filter_avl(array, filter);\r\n  let special_filtered = special_filter(filtered, specialFilter);\r\n  return sort(special_filtered, field, ascending);\r\n}\r\n\r\nfunction process_fc(array: Array<any>, filter: string, field: string, ascending: boolean, specialFilter: string)\r\n{\r\n  let filtered = filter_fc(array, filter);\r\n  let special_filtered = special_filter(filtered, specialFilter);\r\n  return sort(special_filtered, field, ascending);\r\n}\r\n\r\nfunction process_cad(array: Array<any>, filter: string, field: string, ascending: boolean, specialFilter: string)\r\n{\r\n  let filtered = filter_cad(array, filter);\r\n  let special_filtered = special_filter(filtered, specialFilter);\r\n  return sort(special_filtered, field, ascending);\r\n}\r\n\r\nfunction process_unit(array: Array<any>, filter: string, field: string, ascending: boolean, specialFilter: string)\r\n{\r\n  let filtered = filter_unit(array, filter);\r\n  let special_filtered = special_filter(filtered, specialFilter);\r\n  return sort(special_filtered, field, ascending);\r\n}\r\n\r\nexport function StoreProvider(props: any): JSX.Element\r\n{\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  return (<Store.Provider value={{ state, dispatch }}>{props.children}</Store.Provider>);\r\n}\r\n\r\n","import React from 'react';\nimport { Store } from './Store';\n\nconst Nav = () =>\r\n{\n  const { state, dispatch } = React.useContext(Store);\n\n  const closeBaseMapDropdown = () =>\r\n  {\r\n    let e = document.getElementById(\"nav_basemap_dropdown\");\r\n    if (e === null) return;\r\n    e.classList.remove(\"is-active\");\r\n  }\n\n  return (\n    <nav className=\"navbar is-primary\" role=\"navigation\" aria-label=\"main navigation\">\r\n      <div className=\"navbar-brand\">\r\n        <h1 className=\"navbar-item is-size-3 has-text-weight-bold\">Vehicle Control</h1>\r\n      </div>\r\n      <div className=\"navbar-menu\">\r\n        <div className=\"navbar-start\">\r\n          <p\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: \"set_current_view\", payload: \"unit\" });\r\n            }}\r\n            className={`navbar-item is-tab cursor_pointer ${state.current_view === \"unit\" ? 'is-active' : ''} `}>\r\n            Units\r\n          </p>\r\n          <p\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: \"set_current_view\", payload: \"avl\" });\r\n            }}\r\n            className={`navbar-item is-tab cursor_pointer ${state.current_view === \"avl\" ? 'is-active' : ''} `}>\r\n            AVL\r\n          </p>\r\n          <p\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: \"set_current_view\", payload: \"fc\" });\r\n            }}\r\n            className={`navbar-item is-tab cursor_pointer ${state.current_view === \"fc\" ? 'is-active' : ''} `}>\r\n            Fleet Complete\r\n          </p>\r\n          <p\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: \"set_current_view\", payload: \"cad\" });\r\n            }}\r\n            className={`navbar-item is-tab cursor_pointer ${state.current_view === \"cad\" ? 'is-active' : ''} `}>\r\n            CAD\r\n          </p>\r\n          <p\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: \"set_current_view\", payload: \"map\" });\r\n            }}\r\n            className={`navbar-item is-tab cursor_pointer ${state.current_view === \"map\" ? 'is-active' : ''} `}>\r\n            Map\r\n          </p>\r\n        </div>\r\n\r\n        <div\r\n          style={{paddingRight: \"4em\"}}\r\n          className=\"navbar-end\">\r\n          <div\r\n            id=\"nav_basemap_dropdown\"\r\n            className=\"navbar-item has-dropdown\">\r\n            <a className=\"navbar-link\"\r\n              onClick={event =>\r\n              {\r\n                let e = document.getElementById(\"nav_basemap_dropdown\");\r\n                if (e === null) return;\r\n                let isActive = e.classList.contains(\"is-active\");\r\n                let basemaps = document.querySelectorAll(\".esri-basemap-gallery__item\");\r\n                basemaps.forEach(b =>\r\n                {\r\n                  if (!isActive)\r\n                  {\r\n                    b.addEventListener(\"click\", closeBaseMapDropdown);\r\n                  }\r\n                  else\r\n                  {\r\n                    b.removeEventListener(\"click\", closeBaseMapDropdown);\r\n                  }\r\n                });\r\n                e.classList.toggle(\"is-active\");\r\n              }}\r\n            >\r\n              Select Base Map\r\n            </a>\r\n            <div id=\"basemap-navbar-dropdown\"\r\n              className=\"navbar-dropdown\">\r\n              <div\r\n                className=\"navbar-item\">\r\n                <div id=\"basemap_selector_container\"></div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id=\"nav_layerlist_dropdown\"\r\n            className=\"navbar-item has-dropdown\">\r\n            <a className=\"navbar-link\"\r\n              onClick={event =>\r\n              {\r\n                let e = document.getElementById(\"nav_layerlist_dropdown\");\r\n                if (e === null) return;\r\n                let isActive = e.classList.contains(\"is-active\");\r\n                //let container = document.getElementById(\"layerlist_selector_container\");                \r\n                //let basemaps = document.querySelectorAll(\".esri-basemap-gallery__item\");\r\n                //basemaps.forEach(b =>\r\n                //{\r\n                //  if (!isActive)\r\n                //  {\r\n                //    b.addEventListener(\"click\", closeBaseMapDropdown);\r\n                //  }\r\n                //  else\r\n                //  {\r\n                //    b.removeEventListener(\"click\", closeBaseMapDropdown);\r\n                //  }\r\n                //});\r\n                e.classList.toggle(\"is-active\");\r\n              }}\r\n            >\r\n\r\n\r\n              View Layers\r\n            </a>\r\n            <div className=\"navbar-dropdown\">\r\n              <div\r\n                className=\"navbar-item\">\r\n                <div id=\"layerlist_selector_container\"></div>\r\n\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n          <p className=\"navbar-item\"></p>\r\n        </div>\r\n      </div>\r\n    </nav>\n  );\n}\n\nexport default Nav;\n","//namespace Utilities\r\n//{\r\n  const app_path = \"/vehiclecontrol\";\r\n\r\n  export function Hide(e: string): void\r\n  export function Hide(e: HTMLElement): void\r\n  export function Hide(e: Element): void\r\n  export function Hide(e: any):void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    e.classList.add(\"hide\");\r\n    e.classList.remove(\"show\");\r\n    e.classList.remove(\"show-inline\");\r\n    e.classList.remove(\"show-flex\");\r\n  }\r\n\r\n  export function Show(e: string): void\r\n  export function Show(e: HTMLElement): void\r\n  export function Show(e: Element): void\r\n  export function Show(e: any): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    e.classList.add(\"show\");\r\n    e.classList.remove(\"hide\");\r\n    e.classList.remove(\"show-inline\");\r\n    e.classList.remove(\"show-flex\");\r\n  }\r\n\r\n  export function Show_Inline(e: string): void\r\n  export function Show_Inline(e: HTMLElement): void\r\n  export function Show_Inline(e: Element): void\r\n  export function Show_Inline(e: any): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    e.classList.add(\"show-inline\");\r\n    e.classList.remove(\"hide\");\r\n    e.classList.remove(\"show\");\r\n    e.classList.remove(\"show-flex\");\r\n  }\r\n\r\n  export function Show_Inline_Flex(e: string): void\r\n  export function Show_Inline_Flex(e: HTMLElement): void\r\n  export function Show_Inline_Flex(e: Element): void\r\n  export function Show_Inline_Flex(e: any): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    e.classList.add(\"show-inline-flex\");\r\n    e.classList.remove(\"hide\");\r\n    e.classList.remove(\"show\");\r\n    e.classList.remove(\"show-flex\");\r\n  }\r\n\r\n  export function Show_Flex(e: string): void\r\n  export function Show_Flex(e: HTMLElement): void\r\n  export function Show_Flex(e: Element): void\r\n  export function Show_Flex(e: any): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    e.classList.add(\"show-flex\");\r\n    e.classList.remove(\"hide\");\r\n    e.classList.remove(\"show-inline\");\r\n    e.classList.remove(\"show\");\r\n  }\r\n\r\n  export function Error_Show(e: string, errorText?: Array<string>, timeout?: boolean): void\r\n  export function Error_Show(e: string, errorText?: string, timeout?: boolean): void\r\n  export function Error_Show(e: HTMLElement, errorText?: string, timeout?: boolean): void\r\n  export function Error_Show(e: Element, errorText?: string, timeout?: boolean): void\r\n  export function Error_Show(e: any, errorText?: any, timeout?: boolean): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    if (errorText)\r\n    {\r\n      //Set_Text(e, errorText);\r\n      Clear_Element(e);\r\n      let notification = document.createElement(\"div\");\r\n      notification.classList.add(\"notification\");\r\n      notification.classList.add(\"is-danger\");\r\n      let deleteButton = document.createElement(\"button\");\r\n      deleteButton.classList.add(\"delete\");\r\n      deleteButton.onclick = () =>\r\n      {\r\n        Hide(e);\r\n      }\r\n      notification.appendChild(deleteButton);\r\n      if (Array.isArray(errorText))\r\n      {\r\n        // we're assuming that errorText is an array if we get here.\r\n        let ul = document.createElement(\"ul\");\r\n        errorText.forEach((et) =>\r\n        {\r\n          let li = document.createElement(\"li\");\r\n          li.appendChild(document.createTextNode(<string>et));\r\n          ul.appendChild(li);\r\n        });\r\n        notification.appendChild(ul);\r\n      } else\r\n      {\r\n        notification.appendChild(document.createTextNode(errorText));\r\n\r\n      }\r\n\r\n      (<HTMLElement>e).appendChild(notification);\r\n\r\n    }\r\n    Show(e);\r\n    if (timeout === undefined || timeout === true)\r\n    {\r\n      window.setTimeout(function (j)\r\n      {\r\n        Hide(e);\r\n      }, 30000)\r\n    }\r\n  }\r\n\r\n  export function Simple_Error_Show(e: Element, errorText: string): void\r\n  {\r\n    Clear_Element(<HTMLElement>e);\r\n    e.appendChild(document.createTextNode(errorText));\r\n  }\r\n\r\n  export function Clear_Element(node: HTMLElement): void\r\n  { // this function just emptys an element of all its child nodes.\r\n    if (node === null || node === undefined) return;\r\n    while (node.firstChild)\r\n    {\r\n      node.removeChild(node.firstChild);\r\n    }\r\n  }\r\n\r\n  export function Create_Option(value: string, label: string, selected: boolean = false): HTMLOptionElement\r\n  {\r\n    let o = document.createElement(\"option\");\r\n    o.value = value;\r\n    o.text = label;\r\n    o.selected = selected;\r\n    return o;\r\n  }\r\n\r\n  export function Get_Value(e: string): string\r\n  export function Get_Value(e: HTMLSelectElement): string\r\n  export function Get_Value(e: HTMLInputElement): string\r\n  export function Get_Value(e: any): string\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    return (<HTMLInputElement>e).value;\r\n  }\r\n\r\n  export function Set_Value(e: string, value: string): void\r\n  export function Set_Value(e: HTMLSelectElement, value: string): void\r\n  export function Set_Value(e: HTMLInputElement, value: string): void\r\n  export function Set_Value(e: any, value: string): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    (<HTMLInputElement>e).value = value;\r\n  }\r\n\r\n  export function Set_Text(e: string, value: string): void\r\n  export function Set_Text(e: HTMLElement, value: string): void\r\n  export function Set_Text(e: any, value: string): void\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    Clear_Element(e);\r\n    (<HTMLElement>e).appendChild(document.createTextNode(value));\r\n  }\r\n\r\n  //export function Show_Menu(elementId: string)\r\n  //{\r\n  //  //let element = e.srcElement;\r\n  //  // we expect the element's id to be in a \"nav-XXX\" name format, where \r\n  //  // XXX is the element we want to show \r\n  //  let id = elementId.replace(\"nav-\", \"\");\r\n  //  let menuItems = <NodeListOf<HTMLElement>>document.querySelectorAll(\"#menuTabs > li > a\");\r\n  //  if (menuItems.length > 0)\r\n  //  {\r\n  //    for (let i = 0; i < menuItems.length; i++)\r\n  //    {\r\n  //      let item = menuItems.item(i);\r\n  //      if (item.id === elementId)\r\n  //      {\r\n  //        item.parentElement.classList.add(\"is-active\");\r\n  //      }\r\n  //      else\r\n  //      {\r\n  //        item.parentElement.classList.remove(\"is-active\");\r\n  //      }\r\n  //    }\r\n  //  }\r\n  //  Show_Hide_Selector(\"#views > section\", id);\r\n  //}\r\n\r\n  //export function Handle_Tabs(tabSelector: string, containerSelector: string, id: string)\r\n  //{\r\n  //  Activate_Inactivate_Selector(tabSelector, \"nav-\" + id);\r\n  //  Show_Hide_Selector(containerSelector, id);\r\n  //}\r\n\r\n  //export function Activate_Inactivate_Selector(selector: string, id: string)\r\n  //{\r\n  //  let sections = <NodeListOf<HTMLElement>>document.querySelectorAll(selector);\r\n  //  if (sections.length > 0)\r\n  //  {\r\n  //    for (let i = 0; i < sections.length; i++)\r\n  //    {\r\n  //      let item = sections.item(i);\r\n  //      if (item.id === id)\r\n  //      {\r\n  //        item.classList.add(\"is-active\");\r\n  //      }\r\n  //      else\r\n  //      {\r\n  //        item.classList.remove(\"is-active\");\r\n  //      }\r\n  //    }\r\n  //  }\r\n  //}\r\n\r\n  export function Show_Hide_Selector(selector: string, id: string)\r\n  {\r\n    let sections = <NodeListOf<HTMLElement>>document.querySelectorAll(selector);\r\n    if (sections.length > 0)\r\n    {\r\n      for (let i = 0; i < sections.length; i++)\r\n      {\r\n        let item = sections.item(i);\r\n        if (item.id === id)\r\n        {\r\n          Show(item);\r\n        }\r\n        else\r\n        {\r\n          Hide(item);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // original Get Function\r\n  //export function Get<T>(url: string): Promise<T>\r\n  //{\r\n  //  return fetch(url,\r\n  //    {\r\n  //      method: \"GET\",\r\n  //      headers: {\r\n  //        \"Content-Type\": \"application/json\"//,\"Upgrade-Insecure-Requests\": \"1\"\r\n  //      },\r\n  //      cache: \"no-cache\",\r\n  //      credentials: \"include\"\r\n  //    }\r\n  //  )\r\n  //    .then(response =>\r\n  //    {\r\n  //      if (!response.ok)\r\n  //      {\r\n  //        throw new Error(response.statusText)\r\n  //      }\r\n  //      return response.json();\r\n  //    });\r\n  //}\r\n\r\n  export function Get_Path(app_name: string = \"\"): string\r\n  {\r\n    if (app_name.length === 0) app_name = app_path;\r\n    \r\n    let path = \"/\";\r\n    let i = window.location.pathname.toLowerCase().indexOf(app_name);\r\n    if (i === 0)\r\n    {\r\n      path = app_name + \"/\";\r\n    }\r\n    console.log('using app path ' + app_path, ' returning: ' + path);\r\n    return path;\r\n  }\r\n\r\n  export async function Get_Empty(url: string): Promise<string>\r\n  {\r\n    const response = await fetch(url,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"//,\"Upgrade-Insecure-Requests\": \"1\"\r\n        },\r\n        cache: \"no-cache\",\r\n        credentials: \"include\"\r\n      }\r\n    );\r\n    if (!response.ok)\r\n    {\r\n      throw new Error(response.statusText);\r\n    }\r\n    return await response.text();\r\n  }\r\n\r\n  export async function Get<T>(url: string): Promise<T>\r\n  {\r\n    const response = await fetch(url,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"//,\"Upgrade-Insecure-Requests\": \"1\"\r\n        },\r\n        cache: \"no-cache\",\r\n        credentials: \"include\"\r\n      }\r\n    );\r\n    if (!response.ok)\r\n    {\r\n      throw new Error(response.statusText);\r\n    }\r\n    return await response.json();\r\n  }\r\n\r\n  export async function Post<T>(url: string, data: object): Promise<T>\r\n  {\r\n    const response = await fetch(Get_Path() + url,\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify(data),\r\n        cache: \"no-cache\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        credentials: \"include\"\r\n      });\r\n\r\n    if (!response.ok)\r\n    {\r\n      throw new Error(response.statusText)\r\n    }\r\n    return response.json();\r\n\r\n  }\r\n\r\n  export async function Post_Empty(url: string, data: object): Promise<Response>\r\n  {\r\n    const response = await fetch(url,\r\n      {\r\n        method: \"POST\",\r\n        body: data !== null ? JSON.stringify(data) : \"\",\r\n        cache: \"no-cache\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        credentials: \"include\"\r\n      });\r\n\r\n    return response;\r\n  }\r\n\r\n  export function Format_Amount(amount: number): string\r\n  {\r\n    return amount.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\r\n  }\r\n\r\n  export function Format_Date(date: Date): string\r\n  export function Format_Date(date: string): string\r\n  export function Format_Date(date: any): string\r\n  {\r\n    if (date instanceof Date)\r\n    {\r\n      return date.toLocaleDateString('en-us');\r\n    }\r\n    var d = new Date(date);\r\n    return d.toLocaleDateString('en-US');\r\n  }\r\n\r\n  export function Format_DateTime(date: Date): string\r\n  export function Format_DateTime(date: string): string\r\n  export function Format_DateTime(date: any): string\r\n  {\r\n    if (date instanceof Date)\r\n    {\r\n      return date.toLocaleString('en-us');\r\n    }\r\n    return new Date(date).toLocaleString('en-US');\r\n  }\r\n\r\n  export function Validate_Text(e: string, errorElementId: string, errorText: string): string\r\n  export function Validate_Text(e: HTMLInputElement, errorElementId: string, errorText: string): string\r\n  export function Validate_Text(e: HTMLSelectElement, errorElementId: string, errorText: string): string\r\n  export function Validate_Text(e: HTMLElement, errorElementId: string, errorText: string): string\r\n  export function Validate_Text(e: any, errorElementId: string, errorText: string): string\r\n  {\r\n    // this should only be used for required elements.\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    let ele = (<HTMLInputElement>e);\r\n    ele.tagName.toLowerCase() === \"select\" && ele.parentElement !== null ? ele.parentElement.classList.remove(\"is-danger\") : ele.classList.remove(\"is-danger\");\r\n    let v = Get_Value(ele).trim();\r\n    if (v.length === 0)\r\n    {\r\n      ele.tagName.toLowerCase() === \"select\" && ele.parentElement !== null ? ele.parentElement.classList.add(\"is-danger\") : ele.classList.add(\"is-danger\");\r\n      Error_Show(errorElementId, errorText);\r\n      ele.focus();\r\n      ele.scrollTo();\r\n      return \"\";\r\n    }\r\n    return v;\r\n\r\n  }\r\n\r\n  export function Toggle_Loading_Button(e: string, disabled: boolean)\r\n  export function Toggle_Loading_Button(e: HTMLButtonElement, disabled: boolean)\r\n  export function Toggle_Loading_Button(e: any, disabled: boolean)\r\n  {\r\n    if (typeof e === \"string\")\r\n    {\r\n      e = document.getElementById(e);\r\n    }\r\n    let b = <HTMLButtonElement>e;\r\n    b.disabled = disabled;\r\n    b.classList.toggle(\"is-loading\", disabled);\r\n  }\r\n\r\n  //export function Create_Menu_Element(menuItem: MenuItem): HTMLLIElement\r\n  //{\r\n  //  let li = document.createElement(\"li\");\r\n  //  if (menuItem.selected) li.classList.add(\"is-active\");\r\n\r\n\r\n  //  let a = document.createElement(\"a\");\r\n  //  a.id = menuItem.id;\r\n  //  a.onclick = function ()\r\n  //  {\r\n  //    Update_Menu(menuItem);\r\n  //  }\r\n  //  if (menuItem.icon.length > 0)\r\n  //  {\r\n  //    let span = document.createElement(\"span\");\r\n  //    span.classList.add(\"icon\");\r\n  //    span.classList.add(Transaction.app_input_size);\r\n  //    let i = document.createElement(\"i\");\r\n  //    let icons = menuItem.icon.split(\" \");\r\n  //    for (let icon of icons)\r\n  //    {\r\n  //      i.classList.add(icon);\r\n  //    }\r\n  //    span.appendChild(i);\r\n  //    a.appendChild(span);\r\n  //  }\r\n  //  a.appendChild(document.createTextNode(menuItem.label))\r\n  //  li.appendChild(a);\r\n  //  return li;\r\n  //}\r\n\r\n  //export function Update_Menu(menuItem: MenuItem): void\r\n  //{\r\n  //  Set_Text(\"menuTitle\", menuItem.title);\r\n  //  Set_Text(\"menuSubTitle\", menuItem.subTitle);\r\n  //  Show_Menu(menuItem.id);\r\n  //  document.getElementById(menuItem.autofocusId).focus();\r\n  //}\r\n\r\n  //export function Build_Menu_Elements(target: string, Menus: Array<MenuItem>): void\r\n  //{\r\n  //  let menu = document.getElementById(target);\r\n  //  for (let menuItem of Menus)\r\n  //  {\r\n  //    menu.appendChild(Utilities.Create_Menu_Element(menuItem));\r\n  //  }\r\n  //}\r\n\r\n\r\n  //export function CheckBrowser()\r\n  //{\r\n  //  let browser: string = \"\";\r\n  //  if ((navigator.userAgent.indexOf(\"Opera\") || navigator.userAgent.indexOf('OPR')) != -1) \r\n  //  {\r\n  //    browser = 'Opera';\r\n  //  }\r\n  //  else if (navigator.userAgent.indexOf(\"Chrome\") != -1)\r\n  //  {\r\n  //    browser = 'Chrome';\r\n  //  }\r\n  //  else if (navigator.userAgent.indexOf(\"Safari\") != -1)\r\n  //  {\r\n  //    browser = 'Safari';\r\n  //  }\r\n  //  else if (navigator.userAgent.indexOf(\"Firefox\") != -1) \r\n  //  {\r\n  //    browser = 'Firefox';\r\n  //  }\r\n  //  else if ((navigator.userAgent.indexOf(\"MSIE\") != -1) || (!!document.DOCUMENT_NODE == true)) //IF IE > 10\r\n  //  {\r\n  //    browser = 'IE';\r\n  //  }\r\n  //  else \r\n  //  {\r\n  //    browser = 'unknown';\r\n  //  }\r\n  //  return browser;\r\n  //}\r\n\r\n  \r\n\r\n  //export function Create_Centered_Level(level_items: Array<LevelItem>, left: Array<LevelItem> = [], right: Array<LevelItem> = []): HTMLElement\r\n  //{\r\n  //  let level = document.createElement(\"div\");\r\n  //  level.classList.add(\"level\");\r\n\r\n  //  for (let li of level_items)\r\n  //  {\r\n  //    level.appendChild(Create_Level_Item(li));\r\n  //  }\r\n  //  if (left.length > 0)\r\n  //  {\r\n  //    let leftcontainer = document.createElement(\"div\");\r\n  //    leftcontainer.classList.add(\"level-left\");\r\n  //    level.appendChild(leftcontainer);\r\n\r\n  //    for (let li of left)\r\n  //    {\r\n  //      leftcontainer.appendChild(Create_Level_Item(li));\r\n  //    }\r\n  //  }\r\n  //  if (right.length > 0)\r\n  //  {\r\n  //    let rightcontainer = document.createElement(\"div\");\r\n  //    rightcontainer.classList.add(\"level-right\");\r\n  //    level.appendChild(rightcontainer);\r\n\r\n  //    for (let li of right)\r\n  //    {\r\n  //      rightcontainer.appendChild(Create_Level_Item(li));\r\n  //    }\r\n  //  }\r\n\r\n  //  return level;\r\n  //}\r\n\r\n  //function Create_Level_Item(level_item: LevelItem): HTMLElement\r\n  //{\r\n  //  let levelitem = document.createElement(\"div\");\r\n  //  levelitem.classList.add(\"level-item\", ...level_item.classes);\r\n  //  let container = document.createElement(\"div\");\r\n  //  levelitem.appendChild(container);\r\n  //  if (level_item.heading.length > 0)\r\n  //  {\r\n  //    let heading = document.createElement(\"p\");\r\n  //    heading.classList.add(\"heading\");\r\n  //    heading.appendChild(document.createTextNode(level_item.heading));\r\n  //    container.appendChild(heading);\r\n  //  }\r\n  //  if (level_item.title_text.length > 0)\r\n  //  {\r\n  //    let title = document.createElement(\"p\");\r\n  //    title.classList.add(\"title\");\r\n  //    title.appendChild(document.createTextNode(level_item.title_text));\r\n  //    container.appendChild(title);\r\n  //  }\r\n  //  else\r\n  //  {\r\n  //    if (level_item.title !== null)\r\n  //    {\r\n  //      container.appendChild(level_item.title);\r\n  //    }\r\n  //  }\r\n  //  return levelitem;\r\n  //}\r\n\r\n  export function CreateTableCell(celltype: string, value: string, class_to_add: string, width: string = \"\", col_span: number = -1): HTMLTableCellElement\r\n  {\r\n    if (celltype !== \"td\" && celltype !== \"th\") celltype = \"td\";\r\n    let cell = <HTMLTableCellElement>document.createElement(celltype);\r\n    if (width.length > 0) cell.style.width = width;\r\n    if (value.length > 0) cell.appendChild(document.createTextNode(value));\r\n    if (class_to_add.length > 0) cell.classList.add(class_to_add);\r\n    if (col_span > -1) cell.colSpan = col_span;\r\n    return cell;\r\n  }\r\n\r\n//}\r\n\r\n//export default Utilities;","import { Get, Post_Empty } from '../Utilities';\r\n\r\ninterface IAVLData\r\n{\r\n  device_id: string;\r\n  device_type: string;\r\n  unitcode: string;\r\n  direction: number;\r\n  location_timestamp: Date;\r\n  satellite_count: number;\r\n  velocity: number;\r\n  latitude: number;\r\n  longitude: number;\r\n  updated_on: Date;\r\n  error_information: Array<string>;\r\n  show_errors: boolean;\r\n  show_unit_options: boolean;\r\n  has_date_error: boolean;\r\n  has_location_error: boolean;\r\n  has_unit_error: boolean;\r\n  device_history: Array<any>;\r\n}\r\n\r\nexport class AVLData implements IAVLData\r\n{\r\n  public device_id: string = \"\";\r\n  public device_type: string = \"\";\r\n  public unitcode: string = \"\";\r\n  public direction: number = 0;\r\n  public location_timestamp: Date = new Date();\r\n  public satellite_count: number = 0;\r\n  public velocity: number = 0;\r\n  public latitude: number = 0;\r\n  public longitude: number = 0;\r\n  public updated_on: Date = new Date();\r\n  public error_information: Array<string> = [];\r\n  public show_unit_options: boolean = false;\r\n  public show_errors: boolean = false;\r\n  public has_date_error: boolean = false;\r\n  public has_location_error: boolean = false;\r\n  public has_unit_error: boolean = false;\r\n  public device_history: Array<any> = [];\r\n  \r\n  public static async Get(): Promise<Array<AVLData>>\r\n  {\r\n    const data = await Get<Array<AVLData>>('API/AVL/Get');\r\n    return data;\r\n  }\r\n\r\n  public static async Delete(device_id: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(\"API/AVL/Delete?device_id=\" + device_id, {});\r\n    return response;\r\n  }\r\n\r\n  public static async Update(device_id: string, device_type: string, unitcode: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(`API/AVL/Update?device_id=${device_id}&device_type=${device_type}&unitcode=${unitcode}`, {});\r\n    return response;\r\n  }\r\n\r\n}\r\n\r\nexport default AVLData;","import React from 'react';\r\nimport { IErrorInformation } from './interfaces';\r\n\r\nconst ErrorInformation = (props: IErrorInformation) =>\r\n{\r\n  if (!props.show_errors) return null;\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n      </td>\r\n      <td colSpan={props.colspan - 1}>\r\n        <ul>\r\n          {props.error_information.map(\r\n            (errorText, index) =>\r\n            {\r\n              return (\r\n                <li key={index}>\r\n                  {errorText}\r\n                </li>\r\n              )\r\n            })}\r\n        </ul>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default ErrorInformation;","import React, { useState } from 'react';\r\nimport { IUnitOptions } from './interfaces';\r\n//import AVLData from './AVLData';\r\n//import { Store } from './Store';\r\n\r\nconst UnitOptions = (props: IUnitOptions) =>\r\n{\r\n  //const { dispatch } = React.useContext(Store);\r\n  const [currentUnit, setCurrentUnit] = useState(\"\");\r\n  //const fetchAVLData = async () =>\r\n  //{\r\n  //  const data = await AVLData.Get();\r\n  //  return dispatch({ type: 'get_avl_data', payload: data });\r\n  //}\r\n\r\n  if (!props.show_unit_options) return null;\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n      </td>\r\n      <td colSpan={2}\r\n        className=\"has-text-right\">\r\n        Current Unit:\r\n      </td>\r\n      <td>\r\n        {props.unitcode.length === 0 ? 'None' : props.unitcode}\r\n      </td>\r\n      <td className=\"has-text-right\">\r\n        Change To:\r\n      </td>\r\n      <td colSpan={2}>\r\n        <div className=\"field has-addons\">\r\n          <div className=\"control\">\r\n            <input\r\n              className=\"input is-small\"\r\n              type=\"text\"\r\n              onChange={event => setCurrentUnit(event.target.value)}\r\n              value={currentUnit}\r\n              placeholder=\"New Unit\" />\r\n          </div>\r\n          <div className=\"control\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={async event =>\r\n              {\r\n                event.preventDefault();\r\n                console.log('props asset_tag', props.asset_tag);\r\n                if (props.asset_tag)\r\n                {\r\n                  props.update_data(props.asset_tag, currentUnit.trim());\r\n                }\r\n                else\r\n                {\r\n                  props.update_data(props.device_id, props.device_type, currentUnit.trim());\r\n                }\r\n              }}\r\n              className=\"button is-success is-small\">\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default UnitOptions;","import { Get } from './Utilities';\r\n\r\ninterface IUnitHistory\r\n{\r\n  id: number;\r\n  unitcode: string;\r\n  field: string;\r\n  changed_from: string;\r\n  changed_to: string;\r\n  changed_on: Date;\r\n  changed_by: string;\r\n  error_message: string;\r\n}\r\n\r\nexport class UnitHistory implements IUnitHistory\r\n{\r\n  public id: number = -1;\r\n  public unitcode: string = \"\";\r\n  public field: string = \"\";\r\n  public changed_from: string = \"\";\r\n  public changed_to: string = \"\";\r\n  public changed_on: Date = new Date();\r\n  public changed_by: string = \"\";\r\n  public error_message: string = \"\";\r\n\r\n  public static async GetByUnit(unitcode: string): Promise<Array<UnitHistory>>\r\n  {\r\n    const data = await Get<Array<UnitHistory>>('API/History/Unit?unit=' + unitcode);\r\n    return data;\r\n  }\r\n\r\n  public static async GetByDeviceId(device_id: string): Promise<Array<UnitHistory>>\r\n  {\r\n    const data = await Get<Array<UnitHistory>>('API/History/DeviceId?deviceId=' + device_id);\r\n    return data;\r\n  }\r\n\r\n}\r\n\r\nexport default UnitHistory;","import React from 'react';\r\nimport { IUnitHistoryList } from './interfaces';\r\n//import UnitHistory from './UnitHistory';\r\nimport { Format_DateTime } from './Utilities';\r\n\r\nconst UnitHistoryList = (props: IUnitHistoryList) =>\r\n{\r\n  if (!props.history || props.history.length === 0) return null;\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        \r\n      </td>\r\n      <td colSpan={props.colspan - 1}>\r\n        <table className=\"table is-fullwidth\">\r\n          <thead>\r\n            <tr>\r\n              <th\r\n                className=\"has-text-centered\"\r\n                colSpan={props.colspan}>\r\n                {props.title}\r\n              </th>\r\n            </tr>\r\n            <tr>\r\n              <th>\r\n                Unitcode\r\n              </th>\r\n              <th>\r\n                Field\r\n              </th>\r\n              <th>\r\n                Changed From\r\n              </th>\r\n              <th>\r\n                Changed To\r\n              </th>\r\n              <th>\r\n                Changed On\r\n              </th>\r\n              <th>\r\n                Changed By\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {props.history.map(\r\n              (h) =>\r\n              {\r\n                if (h.error_message.length > 0)\r\n                {\r\n                  return (\r\n                    <tr key={h.id}>\r\n                      <td colSpan={6}>{h.error_message}</td>\r\n                    </tr>\r\n                  )\r\n                }\r\n                else\r\n                {\r\n                  return (\r\n                    <tr key={h.id}>\r\n                      <td>\r\n                        {h.unitcode}\r\n                      </td>\r\n                      <td>\r\n                        {h.field}\r\n                      </td>\r\n                      <td>\r\n                        {h.changed_from}\r\n                      </td>\r\n                      <td>\r\n                        {h.changed_to}\r\n                      </td>\r\n                      <td>\r\n                        {Format_DateTime(h.changed_on)}\r\n                      </td>\r\n                      <td>\r\n                        {h.changed_by}\r\n                      </td>\r\n                    </tr>\r\n                  )\r\n                }\r\n\r\n              })}\r\n          </tbody>\r\n        </table>\r\n\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default UnitHistoryList;","import React from 'react';\r\nimport AVLData from './AVLData';\r\nimport { Store } from '../Store';\r\nimport { Format_DateTime } from '../Utilities';\r\nimport ErrorInformation from '../ErrorInformation';\r\nimport UnitOptions from '../UnitOptions';\r\nimport UnitHistory from '../UnitHistory';\r\nimport UnitHistoryList from '../UnitHistoryList';\r\nimport { IAVLDataWithIndex } from '../interfaces';\r\n\r\nconst AVL = (props:IAVLDataWithIndex) =>\r\n{\r\n  const { dispatch } = React.useContext(Store);\r\n\r\n  const UpdateAVLData = async (device_id:string, device_type: string, current_unit: string) =>\r\n  {\r\n    const response = await AVLData.Update(device_id, device_type, current_unit);\r\n    if (response.ok)\r\n    {\r\n      fetchAVLData();\r\n    }\r\n    else\r\n    {\r\n      alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n    }\r\n  }\r\n\r\n\r\n  const fetchAVLData = async () =>\r\n  {\r\n    const data = await AVLData.Get();\r\n    return dispatch({ type: 'get_avl_data', payload: data });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n          {props.index + 1}\r\n        </td>\r\n        <td>\r\n          {props.device_id}\r\n        </td>\r\n        <td>\r\n          <span className=\"icon\">\r\n            <i className={`fas ${props.device_type === \"Phone Number\" ? \"fa-phone\" : \"fa-sim-card\"}`}></i>\r\n          </span>\r\n          \r\n        </td>\r\n        <td>\r\n          <span\r\n            title=\"Change this Device's unit\"\r\n            className=\"cursor_pointer has-text-link\"\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: 'avl_data_toggle_show_unit_options', payload: props.device_id });\r\n            }}>\r\n            {props.unitcode.length === 0 ? 'Add' : props.unitcode}\r\n          </span>\r\n        </td>\r\n        <td>\r\n          {Format_DateTime(props.updated_on)}\r\n        </td>\r\n        <td>\r\n          {Format_DateTime(props.location_timestamp)}\r\n        </td>\r\n        <td className=\"has-text-right icon-options\">\r\n          {\r\n            // show errors, history, delete\r\n          }\r\n          {props.error_information.length > 0 ? (\r\n            <span\r\n              title=\"View Errors\"\r\n              className=\"icon cursor_pointer has-text-warning\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'avl_data_toggle_show_errors', payload: props.device_id });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n            </span>\r\n          ) : ''}\r\n\r\n          <span\r\n            title=\"View History\"\r\n            className=\"icon cursor_pointer has-text-link\"            \r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n\r\n              if (!props.device_history || props.device_history.length === 0)\r\n              {\r\n                let deviceHistory = await UnitHistory.GetByDeviceId(props.device_id);\r\n                dispatch({\r\n                  type: 'avl_device_history',\r\n                  payload: {\r\n                    device_id: props.device_id,\r\n                    device_history: deviceHistory\r\n                  }\r\n                });\r\n              }\r\n              else\r\n              {\r\n                dispatch({\r\n                  type: 'avl_device_history',\r\n                  payload: {\r\n                    device_id: props.device_id,\r\n                    device_history: []\r\n                  }\r\n                });\r\n              }\r\n            }}>\r\n            <i className=\"fas fa-history\"></i>\r\n          </span>\r\n\r\n          <span\r\n            title=\"Delete This Device\"\r\n            className=\"icon cursor_pointer has-text-danger\"            \r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n              const response = await AVLData.Delete(props.device_id);\r\n              if (response.ok)\r\n              {\r\n                fetchAVLData();\r\n              }\r\n              else\r\n              {\r\n                alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n              }\r\n            }\r\n            }>\r\n            <i className=\"fas fa-trash-alt\"></i>\r\n          </span>\r\n\r\n\r\n        </td>\r\n      </tr>\r\n      <UnitOptions\r\n        colspan={7}\r\n        new_unitcode=\"\"\r\n        update_data = {UpdateAVLData}\r\n        {...props} />\r\n      <ErrorInformation\r\n        colspan={7}\r\n        error_information={props.error_information}\r\n        show_errors={props.show_errors} />\r\n      <UnitHistoryList\r\n        colspan={7}\r\n        title=\"History By Device Id\"\r\n        history={props.device_history}\r\n      />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default AVL;","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport AVLData from './AVLData';\r\nimport AVL from './AVL';\r\n\r\nconst AVLList: React.FC = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [currentSearch, setCurrentSearch] = useState(state.avl_data_filter || \"\");\r\n\r\n  const fetchAVLData = async () =>\r\n  {\r\n    const data = await AVLData.Get();\r\n    return dispatch({ type: 'get_avl_data', payload: data });\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div\r\n        style={{ padding: \"1em\", marginBottom: 0 }}\r\n        className=\"level\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item is-size-3 has-text-weight-bold\">\r\n            AVL\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <div className=\"field\">\r\n              <div className=\"control\">\r\n                <input\r\n                  title=\"Search for text in the Device Id and Unit fields.  Hit Enter to Search.\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  onChange={event => setCurrentSearch(event.target.value)}\r\n                  value={currentSearch}\r\n                  onKeyDown={event =>\r\n                  {\r\n                    if (event.key === 'Enter')\r\n                    {\r\n                      event.preventDefault();\r\n                      event.stopPropagation();\r\n                      dispatch({\r\n                        type: \"search_avl_data\",\r\n                        payload: currentSearch\r\n                      })\r\n                    }\r\n\r\n                  }} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                fetchAVLData();\r\n              }}\r\n              title=\"Refresh the AVL Data\"\r\n              type=\"button\"\r\n              className=\"button is-success is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-sync-alt\"></i>\r\n              </span>\r\n            </button>\r\n            <button\r\n              style={{marginLeft: \".5em\"}}\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                setCurrentSearch(\"\");\r\n                dispatch({\r\n                  type: \"search_avl_data\",\r\n                  payload: ''\r\n                })\r\n              }}\r\n              title=\"Reset the Search\"\r\n              type=\"button\"\r\n              className=\"button is-warning is-small\">              \r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-undo-alt\"></i>\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"level-right\">\r\n          <p className=\"level-item has-text-weight-bold\">Error Filters</p>\r\n          <div className=\"level-item tabs\">\r\n            <ul>\r\n              <li className={`${state.avl_data_special_filter === '' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#NoFilter\"\r\n                  onClick={event => { dispatch({ type: \"avl_data_special_filter\", payload: '' }) }}>\r\n                  Show All\r\n                </a>\r\n              </li>\r\n              <li className={`${state.avl_data_special_filter === 'error' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AllErrors\"\r\n                  onClick={event => { dispatch({ type: \"avl_data_special_filter\", payload: 'error' }) }}>\r\n                  All Errors\r\n                </a>\r\n              </li>\r\n              <li className={`${state.avl_data_special_filter === 'unit' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#UnitErrors\"\r\n                  onClick={event => { dispatch({ type: \"avl_data_special_filter\", payload: 'unit' }) }}>\r\n                  Unit\r\n                </a>\r\n              </li>\r\n              <li className={`${state.avl_data_special_filter === 'date' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#DateErrors\"\r\n                  onClick={event => { dispatch({ type: \"avl_data_special_filter\", payload: 'date' }) }}>\r\n                  Date\r\n                </a>\r\n              </li>\r\n              <li className={`${state.avl_data_special_filter === 'location' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#LocationErrors\"\r\n                  onClick={event => { dispatch({ type: \"avl_data_special_filter\", payload: 'location' }) }}>\r\n                  Location\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <table className=\"table is-fullwidth\">\r\n        <thead>\r\n          <tr>\r\n            <th>\r\n              #\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByDeviceId\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'avl_data_sort', payload: 'device_id' });\r\n                }}\r\n                className={`${state.avl_data_sort_field !== 'device_id' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Device Id\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByDeviceType\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'avl_data_sort', payload: 'device_type' });\r\n                }}\r\n                className={`${state.avl_data_sort_field !== 'device_type' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Type\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUnit\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'avl_data_sort', payload: 'unitcode' });\r\n                }}\r\n                className={`${state.avl_data_sort_field !== 'unitcode' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Unit\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByDateSavedOn\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'avl_data_sort', payload: 'updated_on' });\r\n                }}\r\n                className={`${state.avl_data_sort_field !== 'updated_on' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Data Saved On\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByLocationDate\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'avl_data_sort', payload: 'location_timestamp' });\r\n                }}\r\n                className={`${state.avl_data_sort_field !== 'location_timestamp' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Location On\r\n              </a>\r\n            </th>\r\n            <th className=\"has-text-centered\">\r\n              Options\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {state.filtered_avl_data.map((avl, index) =>\r\n          {\r\n            return (<AVL key={avl.device_id} index={index} {...avl} />);\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AVLList;","import { Get, Post_Empty } from '../Utilities';\r\n\r\ninterface IFleetCompleteData\r\n{\r\n  device_id: string;\r\n  asset_tag: string\r\n  unitcode: string;\r\n  vin: string;\r\n  make: string;\r\n  model: string;\r\n  vehicle_year: string;\r\n  direction: number;\r\n  location_timestamp: Date;\r\n  updated_on: Date;\r\n  velocity: number;\r\n  latitude: number;\r\n  longitude: number;\r\n  error_information: Array<string>;\r\n  show_errors: boolean;\r\n  show_unit_options: boolean;\r\n  has_date_error: boolean;\r\n  has_location_error: boolean;\r\n  has_asset_tag_error: boolean;\r\n  has_unit_error: boolean;\r\n  device_history: Array<any>;\r\n}\r\n\r\nexport class FleetCompleteData implements IFleetCompleteData\r\n{\r\n  public device_id: string = \"\";\r\n  public asset_tag: string = \"\";\r\n  public unitcode: string = \"\";\r\n  public vin: string = \"\";\r\n  public make: string = \"\";\r\n  public model: string = \"\";\r\n  public vehicle_year: string = \"\";\r\n  public direction: number = 0;\r\n  public location_timestamp: Date = new Date();\r\n  public updated_on: Date = new Date();\r\n  public velocity: number = 0;\r\n  public latitude: number = 0;\r\n  public longitude: number = 0;  \r\n  public error_information: Array<string> = [];\r\n  public show_unit_options: boolean = false;\r\n  public show_errors: boolean = false;\r\n  public has_date_error: boolean = false;\r\n  public has_location_error: boolean = false;\r\n  public has_asset_tag_error: boolean = false;\r\n  public has_unit_error: boolean = false;\r\n  public device_history: Array<any> = [];\r\n\r\n  public static async Get(): Promise<Array<FleetCompleteData>>\r\n  {\r\n    const data = await Get<Array<FleetCompleteData>>('API/FC/Get');\r\n    return data;\r\n  }\r\n\r\n  public static async Delete(device_id: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(\"API/FC/Delete?device_id=\" + device_id, {});\r\n    return response;\r\n  }\r\n\r\n  public static async Update(asset_tag: string, unitcode: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(`API/FC/Update?asset_tag=${asset_tag}&unitcode=${unitcode}`, {});\r\n    return response;\r\n  }\r\n\r\n}\r\n\r\nexport default FleetCompleteData;","import React from 'react';\r\nimport FleetCompleteData from './FleetCompleteData';\r\nimport { Store } from '../Store';\r\nimport { Format_DateTime } from '../Utilities';\r\nimport ErrorInformation from '../ErrorInformation';\r\nimport UnitOptions from '../UnitOptions';\r\nimport UnitHistory from '../UnitHistory';\r\nimport UnitHistoryList from '../UnitHistoryList';\r\nimport { IFCDataWithIndex } from '../interfaces';\r\n\r\nconst FC = (props: IFCDataWithIndex) =>\r\n{\r\n  const { dispatch } = React.useContext(Store);\r\n\r\n  const updateFCData = async (asset_tag: string, current_unit: string) =>\r\n  {\r\n    const response = await FleetCompleteData.Update(asset_tag, current_unit);\r\n    if (response.ok)\r\n    {\r\n      fetchFCData();\r\n    }\r\n    else\r\n    {\r\n      alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n    }\r\n  }\r\n\r\n  const fetchFCData = async () =>\r\n  {\r\n    const data = await FleetCompleteData.Get();\r\n    return dispatch({ type: 'get_fc_data', payload: data });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n          {props.index + 1}\r\n        </td>\r\n        <td>\r\n          {props.device_id.replace(/^0+/, '')}\r\n        </td>\r\n        <td>\r\n          {props.asset_tag === props.device_id ? '' : props.asset_tag}\r\n        </td>\r\n        <td>\r\n          <span\r\n            title=\"Change this Device's unit\"\r\n            className=\"cursor_pointer has-text-link\"\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: 'fc_data_toggle_show_unit_options', payload: props.device_id });\r\n            }}>\r\n            {props.unitcode.length === 0 ? 'Add' : props.unitcode}\r\n          </span>\r\n        </td>\r\n        <td>\r\n          {Format_DateTime(props.updated_on)}\r\n        </td>\r\n        <td>\r\n          {Format_DateTime(props.location_timestamp)}\r\n        </td>\r\n        <td\r\n          className=\"has-text-right icon-options\">\r\n          {\r\n            // show errors, history, delete\r\n          }\r\n          {props.error_information.length > 0 ? (\r\n            <span\r\n              title=\"View Errors\"\r\n              className=\"icon cursor_pointer has-text-warning\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'fc_data_toggle_show_errors', payload: props.device_id });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n            </span>\r\n          ) : ''}\r\n\r\n          <span\r\n            title=\"View History\"\r\n            className=\"icon cursor_pointer has-text-link\"\r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n\r\n              if (!props.device_history || props.device_history.length === 0)\r\n              {\r\n                let deviceHistory = await UnitHistory.GetByDeviceId(props.asset_tag);\r\n                dispatch({\r\n                  type: 'fc_device_history',\r\n                  payload: {\r\n                    device_id: props.device_id,\r\n                    device_history: deviceHistory\r\n                  }\r\n                });\r\n              }\r\n              else\r\n              {\r\n                dispatch({\r\n                  type: 'fc_device_history',\r\n                  payload: {\r\n                    device_id: props.device_id,\r\n                    device_history: []\r\n                  }\r\n                });\r\n              }\r\n            }}>\r\n            <i className=\"fas fa-history\"></i>\r\n          </span>\r\n\r\n          <span\r\n            title=\"Delete This Device\"\r\n            className=\"icon cursor_pointer has-text-danger\"\r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n              const response = await FleetCompleteData.Delete(props.device_id);\r\n              if (response.ok)\r\n              {\r\n                fetchFCData();\r\n              }\r\n              else\r\n              {\r\n                alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n              }\r\n            }\r\n            }>\r\n            <i className=\"fas fa-trash-alt\"></i>\r\n          </span>\r\n\r\n\r\n        </td>\r\n      </tr>\r\n\r\n      <UnitOptions\r\n        colspan={7}\r\n        new_unitcode=\"\"\r\n        update_data={updateFCData}\r\n        {...props} />\r\n\r\n      <ErrorInformation\r\n        colspan={7}\r\n        error_information={props.error_information}\r\n        show_errors={props.show_errors} />\r\n      <UnitHistoryList\r\n        colspan={7}\r\n        title=\"History By Device Id\"\r\n        history={props.device_history}\r\n      />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default FC;","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport FleetCompleteData from './FleetCompleteData';\r\nimport FC from './FC';\r\n\r\nconst FCList: React.FC = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [currentSearch, setCurrentSearch] = useState(state.fc_data_filter || \"\");\r\n\r\n  const fetchFCData = async () =>\r\n  {\r\n    const data = await FleetCompleteData.Get();\r\n    return dispatch({ type: 'get_fc_data', payload: data });\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div\r\n        style={{ padding: \"1em\", marginBottom: 0 }}\r\n        className=\"level\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item is-size-3 has-text-weight-bold\">\r\n            FC\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <div className=\"field\">\r\n              <div className=\"control\">\r\n                <input\r\n                  title=\"Search for text in the Device Id, Unit, and Asset Tag fields.  Hit Enter to Search.\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  onChange={event => setCurrentSearch(event.target.value)}\r\n                  value={currentSearch}\r\n                  onKeyDown={event =>\r\n                  {\r\n                    if (event.key === 'Enter')\r\n                    {\r\n                      event.preventDefault();\r\n                      event.stopPropagation();\r\n                      dispatch({\r\n                        type: \"search_fc_data\",\r\n                        payload: (event.target as HTMLInputElement).value\r\n                      })\r\n                    }\r\n\r\n                  }} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                fetchFCData();\r\n              }}\r\n              title=\"Refresh the Fleet Complete Data\"\r\n              type=\"button\"\r\n              className=\"button is-success is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-sync-alt\"></i>\r\n              </span>\r\n            </button>\r\n            <button\r\n              style={{ marginLeft: \".5em\" }}\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                setCurrentSearch(\"\");\r\n                dispatch({\r\n                  type: \"search_fc_data\",\r\n                  payload: ''\r\n                })\r\n              }}\r\n              title=\"Reset the Search\"\r\n              type=\"button\"\r\n              className=\"button is-warning is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-undo-alt\"></i>\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"level-right\">\r\n          <p className=\"level-item has-text-weight-bold\">Error Filters</p>\r\n          <div className=\"level-item tabs\">\r\n            <ul>\r\n              <li className={`${state.fc_data_special_filter === '' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#NoFilter\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: '' }) }}>\r\n                  Show All\r\n                </a>\r\n              </li>\r\n              <li className={`${state.fc_data_special_filter === 'error' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AllErrors\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: 'error' }) }}>\r\n                  Errors\r\n                </a>\r\n              </li>\r\n              <li className={`${state.fc_data_special_filter === 'unit' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AssetTagErrors\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: 'asset_tag' }) }}>\r\n                  Asset Tag\r\n                </a>\r\n              </li>\r\n              <li className={`${state.fc_data_special_filter === 'unit' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#UnitErrors\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: 'unit' }) }}>\r\n                  Unit\r\n                </a>\r\n              </li>\r\n              <li className={`${state.fc_data_special_filter === 'date' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#DateErrors\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: 'date' }) }}>\r\n                  Date\r\n                </a>\r\n              </li>\r\n              <li className={`${state.fc_data_special_filter === 'location' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#LocationErrors\"\r\n                  onClick={event => { dispatch({ type: \"fc_data_special_filter\", payload: 'location' }) }}>\r\n                  Location\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <table className=\"table is-fullwidth\">\r\n        <thead>\r\n          <tr>\r\n            <th style={{width: \"5%\"}}>\r\n              #\r\n            </th>\r\n            <th style={{ width: \"10%\" }}>\r\n              <a\r\n                href=\"#SortByDeviceId\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'fc_data_sort', payload: 'device_id' });\r\n                }}\r\n                className={`${state.fc_data_sort_field !== 'device_id' ? '' : state.fc_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Device Id\r\n              </a>\r\n            </th>\r\n            <th style={{width: \"10%\"}}>\r\n              <a\r\n                href=\"#SortByAssetTag\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'fc_data_sort', payload: 'asset_tag' });\r\n                }}\r\n                className={`${state.fc_data_sort_field !== 'asset_tag' ? '' : state.fc_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Asset Tag\r\n              </a>\r\n            </th>\r\n            <th style={{ width: \"10%\" }}>\r\n              <a\r\n                href=\"#SortByUnit\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'fc_data_sort', payload: 'unitcode' });\r\n                }}\r\n                className={`${state.fc_data_sort_field !== 'unitcode' ? '' : state.fc_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Unit\r\n              </a>\r\n            </th>\r\n            <th style={{ width: \"25%\" }}>\r\n              <a\r\n                href=\"#SortByDateSavedOn\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'fc_data_sort', payload: 'updated_on' });\r\n                }}\r\n                className={`${state.fc_data_sort_field !== 'updated_on' ? '' : state.fc_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Data Saved On\r\n              </a>\r\n            </th>\r\n            <th style={{ width: \"25%\" }}>\r\n              <a\r\n                href=\"#SortByLocationDate\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'fc_data_sort', payload: 'location_timestamp' });\r\n                }}\r\n                className={`${state.fc_data_sort_field !== 'location_timestamp' ? '' : state.fc_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Location On\r\n              </a>\r\n            </th>\r\n            <th style={{ width: \"15%\" }}\r\n              className=\"has-text-centered\">\r\n              Options\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {state.filtered_fc_data.map((fc, index) =>\r\n          {\r\n            return (<FC key={fc.device_id} index={index} {...fc} />);\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default FCList;","import { Get, Post_Empty } from '../Utilities';\r\n\r\ninterface ICADData\r\n{\r\n  unitcode: string;\r\n  location_timestamp: Date;\r\n  inci_id: string;\r\n  status: string;\r\n  avstatus: string;\r\n  latitude: number;\r\n  longitude: number;\r\n  speed: number;\r\n  heading: number; \r\n  updated_on: Date;\r\n  error_information: Array<string>;\r\n  show_errors: boolean;\r\n  show_unit_options: boolean;\r\n  has_date_error: boolean;\r\n  has_location_error: boolean;\r\n  has_unit_error: boolean;\r\n  device_history: Array<any>;\r\n}\r\n\r\nexport class CADData implements ICADData\r\n{\r\n  public unitcode: string = \"\";\r\n  public location_timestamp: Date = new Date();\r\n  public inci_id: string = \"\";\r\n  public status: string = \"\";\r\n  public avstatus: string = \"\";\r\n  public latitude: number = 0;\r\n  public longitude: number = 0;\r\n  public speed: number = 0;\r\n  public heading: number = 0;\r\n  public updated_on: Date = new Date();\r\n  public error_information: Array<string> = [];\r\n  public show_unit_options: boolean = false;\r\n  public show_errors: boolean = false;\r\n  public has_date_error: boolean = false;\r\n  public has_location_error: boolean = false;\r\n  public has_unit_error: boolean = false;\r\n  public device_history: Array<any> = [];\r\n\r\n  public static async Get(): Promise<Array<CADData>>\r\n  {\r\n    const data = await Get<Array<CADData>>('API/CAD/Get');\r\n    return data;\r\n  }\r\n\r\n  public static async Delete(unitcode: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(\"API/CAD/Delete?unitcode=\" + unitcode, {});\r\n    return response;\r\n  }\r\n\r\n}\r\n\r\nexport default CADData;","import React from 'react';\r\nimport CADData from './CADData';\r\nimport { Store } from '../Store';\r\nimport { Format_DateTime } from '../Utilities';\r\nimport ErrorInformation from '../ErrorInformation';\r\nimport UnitHistory from '../UnitHistory';\r\nimport UnitHistoryList from '../UnitHistoryList';\r\nimport { ICADDataWithIndex } from '../interfaces';\r\n\r\nconst CAD = (props:ICADDataWithIndex) =>\r\n{\r\n  const { dispatch } = React.useContext(Store);\r\n\r\n  const fetchCADData = async () =>\r\n  {\r\n    const data = await CADData.Get();\r\n    return dispatch({ type: 'get_cad_data', payload: data });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n          {props.index + 1}\r\n        </td>\r\n        <td>\r\n          {props.unitcode}\r\n        </td>\r\n        <td>\r\n          {props.inci_id.trim().length > 0 ? 'On A Call' : ''}\r\n        </td>\r\n        <td>\r\n          {props.status}\r\n        </td>\r\n        <td>\r\n          {props.avstatus}\r\n        </td>\r\n\r\n        <td>\r\n          {Format_DateTime(props.updated_on)}\r\n        </td>\r\n        <td>\r\n          {Format_DateTime(props.location_timestamp)}\r\n        </td>\r\n        <td className=\"has-text-right icon-options\">\r\n          {props.error_information.length > 0 ? (\r\n            <span\r\n              title=\"View Errors\"\r\n              className=\"icon cursor_pointer has-text-warning\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'cad_data_toggle_show_errors', payload: props.unitcode });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n            </span>\r\n          ) : ''}\r\n\r\n          <span\r\n            title=\"View History\"\r\n            className=\"icon cursor_pointer has-text-link\"            \r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n\r\n              if (!props.device_history || props.device_history.length === 0)\r\n              {\r\n                let deviceHistory = await UnitHistory.GetByDeviceId(props.unitcode);\r\n                dispatch({\r\n                  type: 'cad_device_history',\r\n                  payload: {\r\n                    unitcode: props.unitcode,\r\n                    device_history: deviceHistory\r\n                  }\r\n                });\r\n              }\r\n              else\r\n              {\r\n                dispatch({\r\n                  type: 'cad_device_history',\r\n                  payload: {\r\n                    unitcode: props.unitcode,\r\n                    device_history: []\r\n                  }\r\n                });\r\n              }\r\n            }}>\r\n            <i className=\"fas fa-history\"></i>\r\n          </span>\r\n\r\n          <span\r\n            title=\"Delete This Device\"\r\n            className=\"icon cursor_pointer has-text-danger\"            \r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n              const response = await CADData.Delete(props.unitcode);\r\n              if (response.ok)\r\n              {\r\n                fetchCADData();\r\n              }\r\n              else\r\n              {\r\n                alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n              }\r\n            }\r\n            }>\r\n            <i className=\"fas fa-trash-alt\"></i>\r\n          </span>\r\n\r\n\r\n        </td>\r\n      </tr>      \r\n      <ErrorInformation\r\n        colspan={8}\r\n        error_information={props.error_information}\r\n        show_errors={props.show_errors} />\r\n      <UnitHistoryList\r\n        colspan={8}\r\n        title=\"History By Device Id\"\r\n        history={props.device_history}\r\n      />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default CAD;","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport CADData from './CADData';\r\nimport CAD from './CAD';\r\n\r\nconst CADList: React.FC = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [currentSearch, setCurrentSearch] = useState(state.cad_data_filter || \"\");\r\n\r\n  const fetchCADData = async () =>\r\n  {\r\n    const data = await CADData.Get();\r\n    return dispatch({ type: 'get_cad_data', payload: data });\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div\r\n        style={{ padding: \"1em\", marginBottom: 0 }}\r\n        className=\"level\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item is-size-3 has-text-weight-bold\">\r\n            CAD\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <div className=\"field\">\r\n              <div className=\"control\">\r\n                <input\r\n                  title=\"Search for text in the UnitCode field.  Hit Enter to Search.\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  onChange={event => setCurrentSearch(event.target.value)}\r\n                  value={currentSearch}\r\n                  onKeyDown={event =>\r\n                  {\r\n                    if (event.key === 'Enter')\r\n                    {\r\n                      event.preventDefault();\r\n                      event.stopPropagation();\r\n                      dispatch({\r\n                        type: \"search_cad_data\",\r\n                        payload: (event.target as HTMLInputElement).value\r\n                      })\r\n                    }\r\n\r\n                  }} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                fetchCADData();\r\n              }}\r\n              title=\"Refresh the CAD Data\"\r\n              type=\"button\"\r\n              className=\"button is-success is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-sync-alt\"></i>\r\n              </span>\r\n            </button>\r\n            <button\r\n              style={{ marginLeft: \".5em\" }}\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                setCurrentSearch(\"\");\r\n                dispatch({\r\n                  type: \"search_cad_data\",\r\n                  payload: ''\r\n                })\r\n              }}\r\n              title=\"Reset the Search\"\r\n              type=\"button\"\r\n              className=\"button is-warning is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-undo-alt\"></i>\r\n              </span>\r\n            </button>\r\n            </div>\r\n        </div>\r\n        <div className=\"level-right\">\r\n          <p className=\"level-item has-text-weight-bold\">Error Filters</p>\r\n          <div className=\"level-item tabs\">\r\n            <ul>\r\n              <li className={`${state.cad_data_special_filter === '' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#NoFilter\"\r\n                  onClick={event => { dispatch({ type: \"cad_data_special_filter\", payload: '' }) }}>\r\n                  Show All\r\n                </a>\r\n              </li>\r\n              <li className={`${state.cad_data_special_filter === 'error' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AllErrors\"\r\n                  onClick={event => { dispatch({ type: \"cad_data_special_filter\", payload: 'error' }) }}>\r\n                  Errors\r\n                </a>\r\n              </li>\r\n              <li className={`${state.cad_data_special_filter === 'date' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#DateErrors\"\r\n                  onClick={event => { dispatch({ type: \"cad_data_special_filter\", payload: 'date' }) }}>\r\n                  Date\r\n                </a>\r\n              </li>\r\n              <li className={`${state.cad_data_special_filter === 'location' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#LocationErrors\"\r\n                  onClick={event => { dispatch({ type: \"cad_data_special_filter\", payload: 'location' }) }}>\r\n                  Location\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <table className=\"table is-fullwidth\">\r\n        <thead>\r\n          <tr>\r\n            <th>\r\n              #\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUnitCode\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'unitcode' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'unitcode' ? '' : state.avl_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Unit Code\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByCallStatus\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'inci_id' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'inci_id' ? '' : state.cad_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Call Status\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUnitStatus\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'status' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'status' ? '' : state.cad_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Status\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUnitAVStatus\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'avstatus' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'avstatus' ? '' : state.cad_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                AV Status\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByDateSavedOn\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'updated_on' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'updated_on' ? '' : state.cad_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Data Saved On\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByLocationDate\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'cad_data_sort', payload: 'location_timestamp' });\r\n                }}\r\n                className={`${state.cad_data_sort_field !== 'location_timestamp' ? '' : state.cad_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Location On\r\n              </a>\r\n            </th>\r\n            <th className=\"has-text-centered\">\r\n              Options\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {state.filtered_cad_data.map((cad, index) =>\r\n          {\r\n            return (<CAD key={cad.unitcode} index={index} {...cad} />);\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default CADList;","import { Get, Post_Empty } from '../Utilities';\r\n\r\ninterface IUnitData\r\n{\r\n  unitcode: string;\r\n  using_unit: string;\r\n  group_label: string;\r\n  show_in_minicad: boolean;\r\n\r\n  avl_longitude: number;\r\n  avl_latitude: number;\r\n  avl_location_timestamp: Date;\r\n  has_avl_device: boolean;\r\n  has_avl_error: boolean;\r\n\r\n  fc_longitude: number;\r\n  fc_latitude: number;\r\n  fc_location_timestamp: Date;\r\n  has_fc_device: boolean;\r\n  has_fc_error: boolean;\r\n\r\n  cad_longitude: number;\r\n  cad_latitude: number;\r\n  cad_location_timestamp: Date;\r\n  should_have_cad_location: boolean;\r\n  has_cad_error: boolean;\r\n\r\n  error_information: Array<string>;\r\n  show_errors: boolean;\r\n  show_unit_options: boolean;\r\n  device_history: Array<any>;\r\n\r\n}\r\n\r\nexport class UnitData implements IUnitData\r\n{\r\n  public unitcode: string = \"\";\r\n  public using_unit: string = \"\";\r\n  public group_label: string = \"\";\r\n  public show_in_minicad: boolean = false;\r\n  \r\n  public avl_longitude: number = 0;\r\n  public avl_latitude: number = 0;\r\n  public avl_location_timestamp: Date = new Date();\r\n  public has_avl_device: boolean = false;\r\n  public has_avl_error: boolean = false;\r\n  \r\n  public fc_longitude: number = 0;\r\n  public fc_latitude: number =0;\r\n  public fc_location_timestamp: Date = new Date();\r\n  public has_fc_device: boolean = false;\r\n  public has_fc_error: boolean = false;\r\n  \r\n  public cad_longitude: number = 0;\r\n  public cad_latitude: number = 0;\r\n  public cad_location_timestamp: Date = new Date();\r\n  public should_have_cad_location: boolean = false;\r\n  public has_cad_error: boolean = false;\r\n  \r\n  public error_information: Array<string> = [];\r\n  public show_errors: boolean = false;\r\n  public show_unit_options: boolean = false;\r\n  public device_history: Array<any> = [];\r\n\r\n  public static async Get(): Promise<Array<UnitData>>\r\n  {\r\n    const data = await Get<Array<UnitData>>('API/Unit/Get');\r\n    return data;\r\n  }\r\n\r\n  public static async Delete(unitcode: string): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(\"API/Unit/Delete?unitcode=\" + unitcode, {});\r\n    return response;\r\n  }\r\n\r\n  public static async Update(unitcode: string, group: string, has_avl: boolean, has_fc: boolean, should_have_cad: boolean): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(`API/Unit/Update?unitcode=${unitcode}&group=${group}&has_avl=${has_avl}&has_fc=${has_fc}&should_have_cad=${should_have_cad}`, {});\r\n    return response;\r\n  }\r\n\r\n  public static async Add(unitcode: string, group: string, has_avl: boolean, has_fc: boolean, should_have_cad: boolean): Promise<Response>\r\n  {\r\n    const response = await Post_Empty(`API/Unit/Add?unitcode=${unitcode}&group=${group}&has_avl=${has_avl}&has_fc=${has_fc}&should_have_cad=${should_have_cad}`, {});\r\n    return response;\r\n  }\r\n\r\n}\r\n\r\nexport default UnitData;","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport { IUnitControls } from '../interfaces';\r\nimport UnitData from './UnitData';\r\n\r\nconst UnitControls = (props: IUnitControls) =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const getGroupValue = (label: string) =>\r\n  {\r\n    if (label.length === 0) return label;\r\n    let v = state.unit_groups.filter(g => g.label === label);\r\n    if (v.length > 0) return v[0].value;\r\n    return '';\r\n  }\r\n\r\n  const [currentUnit, setCurrentUnit] = useState(props.unitcode);\r\n  const [group, setGroup] = useState(getGroupValue(props.group_label));\r\n  const [hasAVL, setHasAVL] = useState(props.has_avl_device);\r\n  const [hasFC, setHasFC] = useState(props.has_fc_device);\r\n  const [hasCAD, setHasCAD] = useState(props.should_have_cad_location);\r\n\r\n\r\n  if (!props.show_unit_options) return null;\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Group:\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <div className=\"select is-small\">\r\n                <select value={group}\r\n                  onChange={event =>\r\n                  {\r\n                    setGroup(event.target.value)\r\n                  }}>\r\n                  <option value=\"\">No Group</option>\r\n                  {\r\n                    state.unit_groups.map(group =>\r\n                  {\r\n                    return (\r\n                      <option key={group.value} value={group.value}>{group.label}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Has AVL Device\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasAVL}\r\n                  onChange={event => setHasAVL(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Has Fleet Complete Device\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasFC}\r\n                  onChange={event => setHasFC(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Should Have CAD Location\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasCAD}\r\n                  onChange={event => setHasCAD(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td colSpan={3}>\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <button\r\n                onClick={async (event) => \r\n                {\r\n                  event.preventDefault();\r\n                  const response = await UnitData.Update(props.unitcode, group, hasAVL, hasFC, hasCAD);\r\n                  if (response.ok)\r\n                  {\r\n                    props.refresh_data();\r\n                  }\r\n                  else\r\n                  {\r\n                    alert(\"There was a problem updating this record. Please contact MIS Development for more information.\");\r\n                  }\r\n                }}\r\n                title=\"This will save all of the selections above\"\r\n                className=\"is-success button is-small\">\r\n                Save\r\n              </button>\r\n              <button\r\n                title=\"Close the Unit Options menu without saving any changes\"\r\n                style={{ marginLeft: \"1em\" }}\r\n                className=\"is-warning button is-small\"\r\n                onClick={event =>\r\n                {\r\n                  dispatch({ type: 'unit_data_toggle_show_unit_options', payload: props.unitcode });\r\n                }}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UnitControls;\r\n\r\n","import React from 'react';\r\nimport UnitData from './UnitData';\r\nimport { Store } from '../Store';\r\n//import { Format_DateTime } from '../Utilities';\r\nimport ErrorInformation from '../ErrorInformation';\r\n//import UnitOptions from '../UnitOptions';\r\nimport UnitHistory from '../UnitHistory';\r\nimport UnitHistoryList from '../UnitHistoryList';\r\nimport UnitControls from './UnitControls';\r\nimport { IUnitDataWithIndex, IUnitControls } from '../interfaces';\r\n\r\n\r\nconst Unit = (props: IUnitDataWithIndex) =>\r\n{\r\n  const { dispatch } = React.useContext(Store);\r\n\r\n  //const updateUnitData = async (asset_tag: string, current_unit: string) =>\r\n  //{\r\n  //  const response = await UnitData.Update(asset_tag, current_unit);\r\n  //  if (response.ok)\r\n  //  {\r\n  //    fetchFCData();\r\n  //  }\r\n  //  else\r\n  //  {\r\n  //    alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n  //  }\r\n  //}\r\n\r\n  const fetchUnitData = async () =>\r\n  {\r\n    const data = await UnitData.Get();\r\n    return dispatch({ type: 'get_unit_data', payload: data });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n          {props.index + 1}\r\n        </td>\r\n        <td>\r\n          <span\r\n            title=\"Change this Unit's Information\"\r\n            className=\"cursor_pointer has-text-link\"\r\n            onClick={event =>\r\n            {\r\n              dispatch({ type: 'unit_data_toggle_show_unit_options', payload: props.unitcode });\r\n            }}>\r\n            {props.unitcode}\r\n          </span>\r\n          \r\n        </td>\r\n        <td>\r\n          {props.using_unit}\r\n        </td>\r\n        <td>\r\n          {props.group_label}\r\n        </td>\r\n        <td>\r\n          {props.avl_latitude !== 0 ? (\r\n            <span\r\n              title=\"View this on the Map\"\r\n              className=\"icon\">\r\n              <i className=\"fas fa-eye\"></i>\r\n            </span>\r\n          ): ''}\r\n          {new Date(props.avl_location_timestamp).getFullYear() > 1995 ? (\r\n            <span\r\n              style={{ marginLeft: \".5em\" }}\r\n              title=\"View this on the AVL Menu\"\r\n              className=\"icon cursor_pointer\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'view_avl_by_unit', payload: props.unitcode });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-edit\"></i>\r\n            </span>\r\n          ) : ''}\r\n        </td>\r\n        <td>\r\n          {props.fc_latitude !== 0 ? (\r\n            <span\r\n              title=\"View this on the Map\"\r\n              className=\"icon\">\r\n              <i className=\"fas fa-eye\"></i>\r\n            </span>\r\n          ) : ''}\r\n          {new Date(props.fc_location_timestamp).getFullYear() > 1995 ? (\r\n            <span\r\n              style={{ marginLeft: \".5em\" }}\r\n              title=\"View this on the Fleet Complete Menu\"\r\n              className=\"icon cursor_pointer\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'view_fc_by_unit', payload: props.unitcode });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-edit\"></i>\r\n            </span>\r\n          ) : ''}\r\n        </td>\r\n        <td>\r\n          {props.cad_latitude !== 0 ? (\r\n            <span\r\n              title=\"View this on the Map\"\r\n              className=\"icon\">\r\n              <i className=\"fas fa-eye\"></i>\r\n            </span>\r\n          ) : ''}          \r\n          {new Date(props.cad_location_timestamp).getFullYear() > 1995 ? (\r\n            <span\r\n              style={{marginLeft: \".5em\"}}\r\n              title=\"View this on the CAD Menu\"\r\n              className=\"icon cursor_pointer\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'view_cad_by_unit', payload: props.unitcode });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-edit\"></i>\r\n            </span>\r\n            ) : ''}\r\n        </td>\r\n        <td\r\n          className=\"has-text-right icon-options\">\r\n          {\r\n            // show errors, history, delete\r\n          }\r\n          {props.error_information.length > 0 ? (\r\n            <span\r\n              title=\"View Errors\"\r\n              className=\"icon cursor_pointer has-text-warning\"\r\n              onClick={event =>\r\n              {\r\n                dispatch({ type: 'unit_data_toggle_show_errors', payload: props.unitcode });\r\n              }\r\n              }>\r\n              <i className=\"fas fa-exclamation-circle\"></i>\r\n            </span>\r\n          ) : ''}\r\n\r\n          <span\r\n            title=\"View History\"\r\n            className=\"icon cursor_pointer has-text-link\"\r\n            onClick={async event =>\r\n            {\r\n              event.preventDefault();\r\n\r\n              if (!props.device_history || props.device_history.length === 0)\r\n              {\r\n                let deviceHistory = await UnitHistory.GetByUnit(props.unitcode);\r\n                dispatch({\r\n                  type: 'unit_device_history',\r\n                  payload: {\r\n                    unitcode: props.unitcode,\r\n                    device_history: deviceHistory\r\n                  }\r\n                });\r\n              }\r\n              else\r\n              {\r\n                dispatch({\r\n                  type: 'unit_device_history',\r\n                  payload: {\r\n                    unitcode: props.unitcode,\r\n                    device_history: []\r\n                  }\r\n                });\r\n              }\r\n            }}>\r\n            <i className=\"fas fa-history\"></i>\r\n          </span>\r\n\r\n          {new Date(props.avl_location_timestamp).getFullYear() === 1995 && \r\n            new Date(props.fc_location_timestamp).getFullYear() === 1995 && \r\n            new Date(props.cad_location_timestamp).getFullYear() === 1995? (\r\n            <span\r\n              style={{ marginLeft: \".5em\" }}\r\n              title=\"Delete This Device\"\r\n              className=\"icon cursor_pointer has-text-danger\"\r\n              onClick={async event =>\r\n              {\r\n                event.preventDefault();\r\n                const response = await UnitData.Delete(props.unitcode);\r\n                if (response.ok)\r\n                {\r\n                  fetchUnitData();\r\n                }\r\n                else\r\n                {\r\n                  alert(\"There was a problem with deleting this record. Please contact MIS Development for more information.\");\r\n                }\r\n              }\r\n              }>\r\n              <i className=\"fas fa-trash-alt\"></i>\r\n            </span>\r\n          ) : ''}\r\n\r\n\r\n        </td>\r\n      </tr>\r\n      <UnitControls \r\n        colspan={8}\r\n        refresh_data={fetchUnitData}\r\n        {...props}\r\n        />\r\n      <ErrorInformation\r\n        colspan={8}\r\n        error_information={props.error_information}\r\n        show_errors={props.show_errors} />\r\n      <UnitHistoryList\r\n        colspan={8}\r\n        title=\"History By Device Id\"\r\n        history={props.device_history}\r\n      />\r\n    </>\r\n  );\r\n\r\n}\r\n\r\nexport default Unit;","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport { IAddUnit } from '../interfaces';\r\nimport UnitData from './UnitData';\r\n\r\nconst AddUnit = (props: IAddUnit) =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const getGroupValue = (label: string) =>\r\n  {\r\n    if (label.length === 0) return label;\r\n    let v = state.unit_groups.filter(g => g.label === label);\r\n    if (v.length > 0) return v[0].value;\r\n    return '';\r\n  }\r\n\r\n  const fetchUnitData = async () =>\r\n  {\r\n    const data = await UnitData.Get();\r\n    return dispatch({ type: 'get_unit_data', payload: data });\r\n  }\r\n\r\n  const [currentUnit, setCurrentUnit] = useState(props.unitcode);\r\n  const [group, setGroup] = useState(getGroupValue(props.group_label));\r\n  const [hasAVL, setHasAVL] = useState(props.has_avl_device);\r\n  const [hasFC, setHasFC] = useState(props.has_fc_device);\r\n  const [hasCAD, setHasCAD] = useState(props.should_have_cad_location);\r\n\r\n  if (!props.show_add_unit) return null;\r\n\r\n  return (\r\n    <>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Unit Code\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <input\r\n                  value={currentUnit}\r\n                  onChange={event => setCurrentUnit(event.target.value)}\r\n                  type=\"text\" />\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Group:\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <div className=\"select is-small\">\r\n                <select value={group}\r\n                  onChange={event =>\r\n                  {\r\n                    console.log('event', event, event.target.value);\r\n                    setGroup(event.target.value)\r\n                  }}>\r\n                  <option value=\"\">No Group</option>\r\n                  {\r\n                    state.unit_groups.map(group =>\r\n                    {\r\n                      return (\r\n                        <option key={group.value} value={group.value}>{group.label}</option>\r\n                      )\r\n                    })}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Has AVL Device\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasAVL}\r\n                  onChange={event => setHasAVL(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Has Fleet Complete Device\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasFC}\r\n                  onChange={event => setHasFC(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td>\r\n        </td>\r\n        <td colSpan={2}\r\n          className=\"has-text-right\">\r\n          Should Have CAD Location\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <label className=\"checkbox\">\r\n                <input\r\n                  checked={hasCAD}\r\n                  onChange={event => setHasCAD(event.target.checked)}\r\n                  type=\"checkbox\" />\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n      <tr>\r\n        <td colSpan={3}>\r\n        </td>\r\n        <td>\r\n          <div className=\"field\">\r\n            <div className=\"control\">\r\n              <button\r\n                onClick={async (event) => \r\n                {\r\n                  event.preventDefault();\r\n                  const response = await UnitData.Add(currentUnit, group, hasAVL, hasFC, hasCAD);\r\n                  if (response.ok)\r\n                  {\r\n                    fetchUnitData();\r\n                    setCurrentUnit(\"\");\r\n                    setHasAVL(false);\r\n                    setHasFC(false);\r\n                    setHasCAD(false);\r\n                    setGroup(\"\");\r\n                    props.cancel();\r\n                  }\r\n                  else\r\n                  {\r\n                    alert(\"There was a problem updating this record. Please contact MIS Development for more information.\");\r\n                  }\r\n                }}\r\n                title=\"This will save all of the selections above\"\r\n                className=\"is-success button is-small\">\r\n                Save\r\n              </button>\r\n              <button\r\n                title=\"Close the Unit Options menu without saving any changes\"\r\n                style={{ marginLeft: \"1em\" }}\r\n                className=\"is-warning button is-small\"\r\n                onClick={event =>\r\n                {\r\n                  props.cancel();\r\n                }}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td colSpan={4}></td>\r\n      </tr>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AddUnit;\r\n\r\n","import React, { useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport UnitData from './UnitData';\r\nimport Unit from './Unit';\r\nimport AddUnit from './AddUnit';\r\n\r\nconst UnitList: React.FC = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [currentSearch, setCurrentSearch] = useState(state.avl_data_filter || \"\");\r\n  const [showAddUnit, setShowAddUnit] = useState(false);\r\n\r\n  const fetchUnitData = async () =>\r\n  {\r\n    const data = await UnitData.Get();\r\n    return dispatch({ type: 'get_unit_data', payload: data });\r\n  }\r\n\r\n  const hideAddUnit = () =>\r\n  {\r\n    setShowAddUnit(false);\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div\r\n        style={{ padding: \"1em\", marginBottom: 0 }}\r\n        className=\"level\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item is-size-3 has-text-weight-bold\">\r\n            Unit\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <div className=\"field\">\r\n              <div className=\"control\">\r\n                <input\r\n                  title=\"Search for text in the Device Id, Unit, and Asset Tag fields.  Hit Enter to Search.\"\r\n                  type=\"text\"\r\n                  placeholder=\"Search\"\r\n                  onChange={event => setCurrentSearch(event.target.value)}\r\n                  value={currentSearch}\r\n                  onKeyDown={event =>\r\n                  {\r\n                    if (event.key === 'Enter')\r\n                    {\r\n                      event.preventDefault();\r\n                      event.stopPropagation();\r\n                      dispatch({\r\n                        type: \"search_unit_data\",\r\n                        payload: (event.target as HTMLInputElement).value\r\n                      })\r\n                    }\r\n\r\n                  }} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <button\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                fetchUnitData();\r\n              }}\r\n              title=\"Refresh the Unit Data\"\r\n              type=\"button\"\r\n              className=\"button is-success is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-sync-alt\"></i>\r\n              </span>\r\n            </button>\r\n            <button\r\n              style={{ marginLeft: \".5em\" }}\r\n              onClick={event =>\r\n              {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                setCurrentSearch(\"\");\r\n                dispatch({\r\n                  type: \"search_unit_data\",\r\n                  payload: ''\r\n                })\r\n              }}\r\n              title=\"Reset the Search\"\r\n              type=\"button\"\r\n              className=\"button is-warning is-small\">\r\n              <span className=\"icon is-small\">\r\n                <i className=\"fas fa-undo-alt\"></i>\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"level-right\">\r\n          <p className=\"level-item has-text-weight-bold\">Error Filters</p>\r\n          <div className=\"level-item tabs\">\r\n            <ul>\r\n              <li className={`${state.unit_data_special_filter === '' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#NoFilter\"\r\n                  onClick={event => { dispatch({ type: \"unit_data_special_filter\", payload: '' }) }}>\r\n                  Show All\r\n                </a>\r\n              </li>\r\n              <li className={`${state.unit_data_special_filter === 'error' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AllErrors\"\r\n                  onClick={event => { dispatch({ type: \"unit_data_special_filter\", payload: 'error' }) }}>\r\n                  Errors\r\n                </a>\r\n              </li>\r\n              <li className={`${state.unit_data_special_filter === 'unit' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#AssetTagErrors\"\r\n                  onClick={event => { dispatch({ type: \"unit_data_special_filter\", payload: 'avl' }) }}>\r\n                  AVL\r\n                </a>\r\n              </li>\r\n              <li className={`${state.unit_data_special_filter === 'unit' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#UnitErrors\"\r\n                  onClick={event => { dispatch({ type: \"unit_data_special_filter\", payload: 'fc' }) }}>\r\n                  FC\r\n                </a>\r\n              </li>\r\n              <li className={`${state.unit_data_special_filter === 'date' ? 'is-active' : ''}`}>\r\n                <a\r\n                  href=\"#DateErrors\"\r\n                  onClick={event => { dispatch({ type: \"unit_data_special_filter\", payload: 'cad' }) }}>\r\n                  CAD\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <table className=\"table is-fullwidth\">\r\n        <thead>\r\n          <tr>\r\n            <th>\r\n              #\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUnitCode\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'unit_data_sort', payload: 'unitcode' });\r\n                }}\r\n                className={`${state.unit_data_sort_field !== 'unitcode' ? '' : state.unit_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Unit\r\n              </a>\r\n              <span\r\n                style={{ marginLeft: \"1em\" }}\r\n                title=\"Add A Unit\"\r\n                className=\"icon cursor_pointer has-text-danger\"\r\n                onClick={event =>\r\n                {\r\n                  setShowAddUnit(!showAddUnit);\r\n                }}>\r\n                <i className=\"fas fa-plus-circle\"></i>\r\n              </span>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByUsingUnit\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'unit_data_sort', payload: 'using_unit' });\r\n                }}\r\n                className={`${state.unit_data_sort_field !== 'using_unit' ? '' : state.unit_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                Using Unit\r\n              </a>\r\n            </th>\r\n            <th>\r\n              <a\r\n                href=\"#SortByGroup\"\r\n                onClick={event =>\r\n                {\r\n                  event.preventDefault();\r\n                  dispatch({ type: 'unit_data_sort', payload: 'group_label' });\r\n                }}\r\n                className={`${state.unit_data_sort_field !== 'group_label' ? '' : state.unit_data_sort_ascending ? 'sort_ascending' : 'sort_descending'}`}>\r\n                <span\r\n                  title=\"View this on the Map\"\r\n                  className=\"icon\">\r\n                  <i className=\"fas fa-sort\"></i>\r\n                </span>\r\n\r\n              </a>\r\n              <div\r\n                style={{ display: \"inline-block\" }}\r\n                className=\"control\">\r\n                <div className=\"select is-small\">\r\n                  <select\r\n                    onChange={event =>\r\n                    {\r\n                      let currentOption = event.target.options[event.target.selectedIndex].innerText;\r\n                      if (currentOption === \"All Groups\") currentOption = \"\";\r\n                      setCurrentSearch(currentOption);\r\n                      dispatch({\r\n                        type: \"search_unit_data\",\r\n                        payload: currentOption\r\n                      })\r\n\r\n                    }}>\r\n                    <option value=\"\">All Groups</option>\r\n                    {\r\n                      state.unit_groups.map(group =>\r\n                      {\r\n                        return (\r\n                          <option key={group.value} value={group.value}>{group.label}</option>\r\n                        )\r\n                      })}\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </th>\r\n            <th>\r\n              AVL\r\n            </th>\r\n            <th>\r\n              FC\r\n            </th>\r\n            <th>\r\n              CAD\r\n            </th>\r\n            <th className=\"has-text-centered\">\r\n              Options\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <AddUnit\r\n            unitcode=\"\"\r\n            has_avl_device={false}\r\n            has_fc_device={false}\r\n            should_have_cad_location={false}\r\n            group_label={\"\"}\r\n            show_add_unit={showAddUnit}\r\n            cancel={hideAddUnit}\r\n\r\n          />\r\n          {state.filtered_unit_data.map((u, index) =>\r\n          {\r\n            return (<Unit key={u.unitcode} index={index} {...u} />);\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default UnitList;","import React, { useEffect, useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport { loadModules } from 'esri-loader';\r\n\r\nconst AVLLayer = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [avlLayer, setAVLLayer] = useState(null);\r\n\r\n  useEffect(() =>\r\n  {\r\n    console.log('loading avl layer', state.map, state.filtered_avl_data);\r\n    if (state.map !== null && state.filtered_avl_data.length > 0)\r\n    {\r\n      loadModules([\r\n        'esri/layers/GraphicsLayer'\r\n        , 'esri/Graphic'\r\n      ]).then(([\r\n        GraphicsLayer\r\n        , Graphic\r\n      ]) =>\r\n      {\r\n        let layer = avlLayer === null ? new GraphicsLayer() : avlLayer;\r\n        if (layer.graphics.length > 0) layer.removeAll();\r\n        layer.title = \"AVL Units\";\r\n\r\n        for (let d of state.filtered_avl_data)\r\n        {\r\n          let point = {\r\n            type: \"point\"\r\n            , longitude: d.longitude\r\n            , latitude: d.latitude\r\n          };\r\n          let symbol = {\r\n            type: 'simple-marker'\r\n            , color: [225, 0, 0]\r\n          }\r\n          let symbolGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: symbol\r\n          });\r\n\r\n          var text = {\r\n            type: \"text\"\r\n            , color: \"black\"\r\n            , halo: \"white\"\r\n            , haloSize: \"3px\"\r\n            , xoffset: 9\r\n            , yoffset: -2\r\n            , text: (d.unitcode.length > 0 ? d.unitcode : d.device_id)\r\n            , horizontalAlignment: \"left\"\r\n            , font: {\r\n              size: 10\r\n            }\r\n\r\n          };\r\n\r\n          var textGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: text\r\n          });\r\n\r\n          layer.add(symbolGraphic);\r\n          layer.add(textGraphic);\r\n          \r\n        }\r\n\r\n        setAVLLayer(layer);\r\n        state.map.add(layer);\r\n\r\n      }).catch(err => console.error(err));\r\n    }\r\n    return function cleanup()\r\n    {\r\n      if (state.map !== null) state.map.remove(avlLayer);\r\n    }\r\n  }, [state.map, state.filtered_avl_data]);\r\n\r\n\r\n  return null;\r\n}\r\n\r\nexport default AVLLayer;","import React, { useEffect, useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport { loadModules } from 'esri-loader';\r\n\r\nconst FCLayer = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [fcLayer, setFCLayer] = useState(null);\r\n\r\n  useEffect(() =>\r\n  {\r\n    console.log('loading fc layer', state.map, state.filtered_fc_data);\r\n    if (state.map !== null && state.filtered_fc_data.length > 0)\r\n    {\r\n      loadModules([\r\n        'esri/layers/GraphicsLayer'\r\n        , 'esri/Graphic'\r\n      ]).then(([\r\n        GraphicsLayer\r\n        , Graphic\r\n      ]) =>\r\n      {\r\n        let layer = fcLayer === null ? new GraphicsLayer() : fcLayer;\r\n        if (layer.graphics.length > 0) layer.removeAll();\r\n        layer.title = \"FleetComplete Units\";\r\n\r\n        for (let d of state.filtered_fc_data)\r\n        {\r\n          let point = {\r\n            type: \"point\"\r\n            , longitude: d.longitude\r\n            , latitude: d.latitude\r\n          };\r\n          let symbol = {\r\n            type: 'simple-marker'\r\n            , color: [0, 225, 0]\r\n          }\r\n          let symbolGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: symbol\r\n          });\r\n\r\n          var text = {\r\n            type: \"text\"\r\n            , color: \"black\"\r\n            , halo: \"white\"\r\n            , haloSize: \"3px\"\r\n            , xoffset: 9\r\n            , yoffset: -2\r\n            , text: (d.unitcode.length > 0 ? d.unitcode : d.device_id)\r\n            , horizontalAlignment: \"left\"\r\n            , font: {\r\n              size: 10\r\n            }\r\n\r\n          };\r\n\r\n          var textGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: text\r\n          });\r\n\r\n          layer.add(symbolGraphic);\r\n          layer.add(textGraphic);\r\n\r\n        }\r\n\r\n        setFCLayer(layer);\r\n        state.map.add(layer);\r\n\r\n      }).catch(err => console.error(err));\r\n    }\r\n    return function cleanup()\r\n    {\r\n      if (state.map !== null) state.map.remove(fcLayer);\r\n    }\r\n  }, [state.map, state.filtered_fc_data]);\r\n\r\n\r\n  return null;\r\n}\r\n\r\nexport default FCLayer;","import React, { useEffect, useState } from 'react';\r\nimport { Store } from '../Store';\r\nimport { loadModules } from 'esri-loader';\r\n\r\nconst CADLayer = () =>\r\n{\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  const [cadLayer, setCADLayer] = useState(null);\r\n\r\n  useEffect(() =>\r\n  {\r\n    console.log('loading fc layer', state.map, state.filtered_fc_data);\r\n    if (state.map !== null && state.filtered_cad_data.length > 0)\r\n    {\r\n      loadModules([\r\n        'esri/layers/GraphicsLayer'\r\n        , 'esri/Graphic'\r\n      ]).then(([\r\n        GraphicsLayer\r\n        , Graphic\r\n      ]) =>\r\n      {\r\n        let layer = cadLayer === null ? new GraphicsLayer() : cadLayer;\r\n        if (layer.graphics.length > 0) layer.removeAll();\r\n        layer.title = \"CAD Units\";\r\n\r\n        for (let d of state.filtered_cad_data)\r\n        {\r\n          let point = {\r\n            type: \"point\"\r\n            , longitude: d.longitude\r\n            , latitude: d.latitude\r\n          };\r\n          let symbol = {\r\n            type: 'simple-marker'\r\n            , color: [0, 0, 225]\r\n          }\r\n          let symbolGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: symbol\r\n          });\r\n\r\n          var text = {\r\n            type: \"text\"\r\n            , color: \"black\"\r\n            , halo: \"white\"\r\n            , haloSize: \"3px\"\r\n            , xoffset: 9\r\n            , yoffset: -2\r\n            , text: (d.unitcode.length > 0 ? d.unitcode : d.device_id)\r\n            , horizontalAlignment: \"left\"\r\n            , font: {\r\n              size: 10\r\n            }\r\n\r\n          };\r\n\r\n          var textGraphic = new Graphic({\r\n            geometry: point\r\n            , symbol: text\r\n          });\r\n\r\n          layer.add(symbolGraphic);\r\n          layer.add(textGraphic);\r\n\r\n        }\r\n\r\n        setCADLayer(layer);\r\n        state.map.add(layer);\r\n\r\n      }).catch(err => console.error(err));\r\n    }\r\n    return function cleanup()\r\n    {\r\n      if (state.map !== null) state.map.remove(cadLayer);\r\n    }\r\n  }, [state.map, state.filtered_cad_data]);\r\n\r\n\r\n  return null;\r\n}\r\n\r\nexport default CADLayer;","import React, { useEffect, useRef } from 'react';\r\nimport { loadModules } from 'esri-loader';\r\nimport { Store } from '../Store';\r\nimport AVLLayer from './AVLLayer';\r\nimport FCLayer from './FCLayer';\r\nimport CADLayer from './CADLayer';\r\n\r\nexport const WebMapView = () =>\r\n{\r\n  const mapRef = useRef(null);\r\n\r\n  const { state, dispatch } = React.useContext(Store);\r\n\r\n  useEffect(\r\n    () =>\r\n    {\r\n      // lazy load the required ArcGIS API for JavaScript modules and CSS\r\n      loadModules([\r\n        'esri/Map',\r\n        'esri/views/MapView',\r\n        'esri/widgets/BasemapGallery',\r\n        'esri/widgets/LayerList',\r\n        'esri/widgets/Home'\r\n      ], { css: true })\r\n        .then(([ArcGISMap, MapView, BasemapGallery, LayerList, Home]) =>\r\n        {\r\n          const map = new ArcGISMap({\r\n            basemap: 'osm'\r\n          });\r\n\r\n          // load the map view at the ref's DOM node\r\n          const view = new MapView({\r\n            container: mapRef.current,\r\n            map: map,\r\n            center: [-81.80, 29.950],\r\n            zoom: 11\r\n          });\r\n\r\n          var basemapGallery = new BasemapGallery({\r\n            view: view,\r\n            container: document.getElementById(\"basemap_selector_container\"),\r\n            source: {\r\n              portal: {\r\n                url: \"http://www.arcgis.com\",\r\n                useVectorBasemaps: false, // Load vector tile basemap group\r\n              },\r\n            }\r\n          });\r\n\r\n          var layerlist = new LayerList({\r\n            view: view,\r\n            container: document.getElementById(\"layerlist_selector_container\")\r\n          });\r\n\r\n          var homeWidget = new Home({ view: view });\r\n          view.ui.add(homeWidget, { position: \"top-left\" });\r\n\r\n          //view.ui.add(layerlist, { position: \"top-right\" });\r\n\r\n          view.when(() =>\r\n          {\r\n            console.log('view.then running');\r\n            dispatch({ type: 'save_map', payload: map });\r\n            dispatch({ type: 'save_map_view', payload: view });\r\n\r\n          });\r\n\r\n          return () =>\r\n          {\r\n            if (view)\r\n            {\r\n              // destroy the map view\r\n              view.container = null;\r\n            }\r\n          };\r\n        });\r\n    }, []\r\n  );\r\n\r\n  return (\r\n    <div className=\"webmap\" ref={mapRef}>\r\n      <AVLLayer />\r\n      <FCLayer />\r\n      <CADLayer />\r\n    </div>);\r\n};","import { Get, Post_Empty } from './Utilities';\r\n\r\ninterface ISimpleValue\r\n{\r\n  label: string\r\n  value: string\r\n}\r\n\r\nclass SimpleValue implements ISimpleValue\r\n{\r\n  public label: string = \"\";\r\n  public value: string = \"\";\r\n\r\n  public static async GetUnitGroups(): Promise<Array<SimpleValue>>\r\n  {\r\n    const data = await Get<Array<SimpleValue>>('API/Group/GetUnitGroups');\r\n    return data;\r\n  }\r\n\r\n}\r\n\r\nexport default SimpleValue;","import React from 'react';\nimport Nav from './nav';\nimport { Store } from './Store';\nimport AVLData from './AVL/AVLData';\nimport AVLList from './AVL/AVLList';\nimport FleetCompleteData from './FleetComplete/FleetCompleteData';\nimport FCList from './FleetComplete/FCList';\nimport CADData from './Cad/CADData';\nimport CADList from './Cad/CADList';\nimport UnitData from './Unit/UnitData';\nimport UnitList from './Unit/UnitList';\nimport { WebMapView } from './Map/WebMapView';\nimport SimpleValue from './SimpleValue';\n//import './App.css';\n\nconst App: React.FC = () =>\r\n{\n  const { state, dispatch } = React.useContext(Store);\n\n  React.useEffect(() =>\n  {\n    fetchUnitData();\n    fetchAVLData();\r\n    fetchFCData();\r\n    fetchCADData();\r\n    fetchUnitGroups();\n    //state.unit_data.length === 0 && fetchUnitData();\n    //state.avl_data.length === 0 && fetchAVLData();\r\n    //state.fc_data.length === 0 && fetchFCData();\r\n    //state.cad_data.length === 0 && fetchCADData();\r\n    //state.unit_groups.length === 0 && fetchUnitGroups();\r\n  }, []);\n\n  const fetchUnitGroups = async () =>\r\n  {\n    const data = await SimpleValue.GetUnitGroups();\r\n    return dispatch({ type: 'get_unit_groups_data', payload: data });\r\n  }\n\n  const fetchAVLData = async () =>\r\n  {\n    const data = await AVLData.Get();\r\n    return dispatch({ type: 'get_avl_data', payload: data });\r\n  }\n\n  const fetchFCData = async () =>\r\n  {\n    const data = await FleetCompleteData.Get();\r\n    console.log('fleet complete data', data);\r\n    return dispatch({ type: 'get_fc_data', payload: data });\r\n  }\n\n  const fetchCADData = async () =>\r\n  {\n    const data = await CADData.Get();\r\n    console.log('CAD data', data);\r\n    return dispatch({ type: 'get_cad_data', payload: data });\r\n  }\n\n  const fetchUnitData = async () =>\r\n  {\n    const data = await UnitData.Get();\r\n    console.log('Unit data', data);\r\n    return dispatch({ type: 'get_unit_data', payload: data });\r\n  }\n\n  return (\n    <>\n      <Nav />\n\n      <div className=\"columns main-container is-mobile\">\n        <div\n          style={{ paddingRight: 0 }}\n          className={`column left-side ${state.current_view !== 'map' ? 'is-full-mobile is-full-tablet is-full-desktop is-half-widescreen is-half-fullhd' : 'hide'}`}>\n          {state.current_view === \"avl\" ? <AVLList /> : null}\n          {state.current_view === \"unit\" ? <UnitList /> : null}\n          {state.current_view === \"fc\" ? <FCList /> : null}\n          {state.current_view === \"cad\" ? <CADList /> : null}\n        </div>\n\n        <div\n          style={{ paddingLeft: 0 }}\n          className={`column right-side ${state.current_view !== 'map' ? 'is-half-widescreen is-half-fullhd' : ''}`}>\n          <WebMapView />\n        </div>\n\n      </div>\n\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport { StoreProvider } from './Store';\nimport App from './App';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <StoreProvider>\n    <App />\n  </StoreProvider>, document.getElementById('root'));\n\n\n"],"sourceRoot":""}