(this.webpackJsonpvehiclecontrol=this.webpackJsonpvehiclecontrol||[]).push([[0],{15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),i=a(2),s=a(3),o={map:null,map_view:null,unit_groups:[],current_view:"unit",avl_data:new Array,fc_data:new Array,cad_data:new Array,unit_data:new Array,filtered_avl_data:new Array,filtered_fc_data:new Array,filtered_cad_data:new Array,filtered_unit_data:new Array,avl_data_filter:"",fc_data_filter:"",cad_data_filter:"",unit_data_filter:"",avl_data_sort_field:"device_id",fc_data_sort_field:"device_id",cad_data_sort_field:"unitcode",unit_data_sort_field:"unitcode",avl_data_sort_ascending:!0,fc_data_sort_ascending:!0,cad_data_sort_ascending:!0,unit_data_sort_ascending:!0,avl_data_special_filter:"",fc_data_special_filter:"",cad_data_special_filter:"",unit_data_special_filter:""},d=r.a.createContext(o);function u(e,t){switch(t.type){case"save_map":return Object(s.a)({},e,{map:t.payload});case"save_map_view":return Object(s.a)({},e,{map_view:t.payload});case"get_unit_groups_data":return Object(s.a)({},e,{unit_groups:t.payload});case"set_current_view":return Object(s.a)({},e,{current_view:t.payload});case"view_avl_by_unit":return Object(s.a)({},e,{current_view:"avl",filtered_avl_data:p(e.avl_data,t.payload,e.avl_data_sort_field,e.avl_data_sort_ascending,e.avl_data_special_filter),avl_data_special_filter:"",avl_data_filter:t.payload});case"view_fc_by_unit":return Object(s.a)({},e,{current_view:"fc",filtered_fc_data:f(e.fc_data,t.payload,e.fc_data_sort_field,e.fc_data_sort_ascending,e.fc_data_special_filter),fc_data_special_filter:"",fc_data_filter:t.payload});case"view_cad_by_unit":return Object(s.a)({},e,{current_view:"cad",filtered_cad_data:h(e.cad_data,t.payload,e.cad_data_sort_field,e.cad_data_sort_ascending,e.cad_data_special_filter),cad_data_special_filter:"",cad_data_filter:t.payload});case"get_avl_data":return Object(s.a)({},e,{avl_data:t.payload,filtered_avl_data:p(t.payload,e.avl_data_filter,e.avl_data_sort_field,e.avl_data_sort_ascending,e.avl_data_special_filter)});case"get_fc_data":return Object(s.a)({},e,{fc_data:t.payload,filtered_fc_data:f(t.payload,e.fc_data_filter,e.fc_data_sort_field,e.fc_data_sort_ascending,e.fc_data_special_filter)});case"get_cad_data":return Object(s.a)({},e,{cad_data:t.payload,filtered_cad_data:f(t.payload,e.cad_data_filter,e.cad_data_sort_field,e.cad_data_sort_ascending,e.cad_data_special_filter)});case"get_unit_data":return Object(s.a)({},e,{unit_data:t.payload,filtered_unit_data:v(t.payload,e.unit_data_filter,e.unit_data_sort_field,e.unit_data_sort_ascending,e.unit_data_special_filter)});case"search_avl_data":return Object(s.a)({},e,{filtered_avl_data:p(e.avl_data,t.payload,e.avl_data_sort_field,e.avl_data_sort_ascending,e.avl_data_special_filter),avl_data_filter:t.payload});case"search_fc_data":return Object(s.a)({},e,{filtered_fc_data:f(e.fc_data,t.payload,e.fc_data_sort_field,e.fc_data_sort_ascending,e.fc_data_special_filter),fc_data_filter:t.payload});case"search_cad_data":return Object(s.a)({},e,{filtered_cad_data:h(e.cad_data,t.payload,e.cad_data_sort_field,e.cad_data_sort_ascending,e.cad_data_special_filter),cad_data_filter:t.payload});case"search_unit_data":return Object(s.a)({},e,{filtered_unit_data:v(e.unit_data,t.payload,e.unit_data_sort_field,e.unit_data_sort_ascending,e.unit_data_special_filter),unit_data_filter:t.payload});case"avl_device_history":var a=e.filtered_avl_data.map((function(e){return e.device_id===t.payload.device_id&&(e.device_history=t.payload.device_history),e}));return Object(s.a)({},e,{filtered_avl_data:a});case"fc_device_history":var n=e.filtered_fc_data.map((function(e){return e.device_id===t.payload.device_id&&(e.device_history=t.payload.device_history),e}));return Object(s.a)({},e,{filtered_fc_data:n});case"cad_device_history":var r=e.filtered_cad_data.map((function(e){return e.unitcode===t.payload.unitcode&&(e.device_history=t.payload.device_history),e}));return Object(s.a)({},e,{filtered_cad_data:r});case"unit_device_history":var c=e.filtered_unit_data.map((function(e){return e.unitcode===t.payload.unitcode&&(e.device_history=t.payload.device_history),e}));return Object(s.a)({},e,{filtered_unit_data:c});case"avl_data_special_filter":return Object(s.a)({},e,{filtered_avl_data:p(e.avl_data,e.avl_data_filter,e.avl_data_sort_field,e.avl_data_sort_ascending,t.payload),avl_data_special_filter:t.payload});case"fc_data_special_filter":return Object(s.a)({},e,{filtered_fc_data:f(e.fc_data,e.fc_data_filter,e.fc_data_sort_field,e.fc_data_sort_ascending,t.payload),fc_data_special_filter:t.payload});case"cad_data_special_filter":return Object(s.a)({},e,{filtered_cad_data:h(e.cad_data,e.cad_data_filter,e.cad_data_sort_field,e.cad_data_sort_ascending,t.payload),cad_data_special_filter:t.payload});case"unit_data_special_filter":return Object(s.a)({},e,{filtered_unit_data:h(e.unit_data,e.unit_data_filter,e.unit_data_sort_field,e.unit_data_sort_ascending,t.payload),unit_data_special_filter:t.payload});case"avl_data_sort":var l=m(e.filtered_avl_data,t.payload,!e.avl_data_sort_ascending);return Object(s.a)({},e,{filtered_avl_data:l,avl_data_sort_field:t.payload,avl_data_sort_ascending:!e.avl_data_sort_ascending});case"fc_data_sort":var i=m(e.filtered_fc_data,t.payload,!e.fc_data_sort_ascending);return Object(s.a)({},e,{filtered_fc_data:i,fc_data_sort_field:t.payload,fc_data_sort_ascending:!e.fc_data_sort_ascending});case"cad_data_sort":var o=m(e.filtered_cad_data,t.payload,!e.cad_data_sort_ascending);return Object(s.a)({},e,{filtered_cad_data:o,cad_data_sort_field:t.payload,cad_data_sort_ascending:!e.cad_data_sort_ascending});case"unit_data_sort":var d=m(e.filtered_unit_data,t.payload,!e.unit_data_sort_ascending);return Object(s.a)({},e,{filtered_unit_data:d,unit_data_sort_field:t.payload,unit_data_sort_ascending:!e.unit_data_sort_ascending});case"avl_data_toggle_show_errors":var u=e.filtered_avl_data.map((function(e){return e.device_id===t.payload&&(e.show_errors=!e.show_errors),e}));return Object(s.a)({},e,{filtered_avl_data:u});case"fc_data_toggle_show_errors":var _=e.filtered_fc_data.map((function(e){return e.device_id===t.payload&&(e.show_errors=!e.show_errors),e}));return Object(s.a)({},e,{filtered_fc_data:_});case"cad_data_toggle_show_errors":var y=e.filtered_cad_data.map((function(e){return e.unitcode===t.payload&&(e.show_errors=!e.show_errors),e}));return Object(s.a)({},e,{filtered_cad_data:y});case"unit_data_toggle_show_errors":var E=e.filtered_unit_data.map((function(e){return e.unitcode===t.payload&&(e.show_errors=!e.show_errors),e}));return Object(s.a)({},e,{filtered_unit_data:E});case"avl_data_toggle_show_unit_options":var g=e.filtered_avl_data.map((function(e){return e.device_id===t.payload&&(e.show_unit_options=!e.show_unit_options),e}));return Object(s.a)({},e,{filtered_avl_data:g});case"fc_data_toggle_show_unit_options":var w=e.filtered_fc_data.map((function(e){return e.device_id===t.payload&&(e.show_unit_options=!e.show_unit_options),e}));return Object(s.a)({},e,{filtered_fc_data:w});case"unit_data_toggle_show_unit_options":var b=e.filtered_unit_data.map((function(e){return e.unitcode===t.payload&&(e.show_unit_options=!e.show_unit_options),e}));return Object(s.a)({},e,{filtered_unit_data:b});default:return e}}function _(e,t){if(0===t.length)return e;switch(t){case"error":return e.filter((function(e){return e.error_information.length>0}));case"asset_tag":return e.filter((function(e){return e.has_asset_tag_error}));case"date":return e.filter((function(e){return e.has_date_error}));case"location":return e.filter((function(e){return e.has_location_error}));case"unit":return e.filter((function(e){return e.has_unit_error}));case"cad":return e.filter((function(e){return e.has_cad_error}));case"avl":return e.filter((function(e){return e.has_avl_error}));case"fc":return e.filter((function(e){return e.has_fc_error}));default:return e}}function m(e,t,a){return["updated_on","location_timestamp"].indexOf(t)>-1?function(e,t,a){return e.sort((function(e,n){return new Date(e[t])>new Date(n[t])?a?1:-1:new Date(n[t])>new Date(e[t])?a?-1:1:0}))}(e,t,a):e.sort((function(e,n){return e[t]>n[t]?a?1:-1:n[t]>e[t]?a?-1:1:0}))}function p(e,t,a,n,r){return m(_(function(e,t){if(0===t.length)return e;var a=t.toLowerCase();return e.filter((function(e){return e.device_id.toLowerCase().indexOf(a)>-1||e.unitcode.toLowerCase().indexOf(a)>-1}))}(e,t),r),a,n)}function f(e,t,a,n,r){return m(_(function(e,t){if(0===t.length)return e;var a=t.toLowerCase();return e.filter((function(e){return e.device_id.toLowerCase().indexOf(a)>-1||e.unitcode.toLowerCase().indexOf(a)>-1||e.asset_tag.toLowerCase().indexOf(a)>-1}))}(e,t),r),a,n)}function h(e,t,a,n,r){return m(_(function(e,t){if(0===t.length)return e;var a=t.toLowerCase();return e.filter((function(e){return e.unitcode.toLowerCase().indexOf(a)>-1}))}(e,t),r),a,n)}function v(e,t,a,n,r){return m(_(function(e,t){if(0===t.length)return e;var a=t.toLowerCase();return e.filter((function(e){return e.unitcode.toLowerCase().indexOf(a)>-1||e.group_label.toLowerCase().indexOf(a)>-1||e.using_unit.toLowerCase().indexOf(a)>-1}))}(e,t),r),a,n)}var y=a(1),E=a.n(y),g=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,n=function(){var e=document.getElementById("nav_basemap_dropdown");null!==e&&e.classList.remove("is-active")};return r.a.createElement("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("h1",{className:"navbar-item is-size-3 has-text-weight-bold"},"Vehicle Control")),r.a.createElement("div",{className:"navbar-menu"},r.a.createElement("div",{className:"navbar-start"},r.a.createElement("p",{onClick:function(e){a({type:"set_current_view",payload:"unit"})},className:"navbar-item is-tab cursor_pointer ".concat("unit"===t.current_view?"is-active":""," ")},"Units"),r.a.createElement("p",{onClick:function(e){a({type:"set_current_view",payload:"avl"})},className:"navbar-item is-tab cursor_pointer ".concat("avl"===t.current_view?"is-active":""," ")},"AVL"),r.a.createElement("p",{onClick:function(e){a({type:"set_current_view",payload:"fc"})},className:"navbar-item is-tab cursor_pointer ".concat("fc"===t.current_view?"is-active":""," ")},"Fleet Complete"),r.a.createElement("p",{onClick:function(e){a({type:"set_current_view",payload:"cad"})},className:"navbar-item is-tab cursor_pointer ".concat("cad"===t.current_view?"is-active":""," ")},"CAD"),r.a.createElement("p",{onClick:function(e){a({type:"set_current_view",payload:"map"})},className:"navbar-item is-tab cursor_pointer ".concat("map"===t.current_view?"is-active":""," ")},"Map")),r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{id:"nav_basemap_dropdown",className:"navbar-item has-dropdown"},r.a.createElement("a",{className:"navbar-link",onClick:function(e){var t=document.getElementById("nav_basemap_dropdown");if(null!==t){var a=t.classList.contains("is-active");document.querySelectorAll(".esri-basemap-gallery__item").forEach((function(e){a?e.removeEventListener("click",n):e.addEventListener("click",n)})),t.classList.toggle("is-active")}}},"Select Base Map"),r.a.createElement("div",{className:"navbar-dropdown"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{id:"basemap_selector_container"})))),r.a.createElement("p",{className:"navbar-item"},"Layers"),r.a.createElement("p",{className:"navbar-item"}))))},w=a(4),b=a(5);function N(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-cache",credentials:"include"}));case 2:if((t=a.sent).ok){a.next=5;break}throw new Error(t.statusText);case 5:return a.next=7,E.a.awrap(t.json());case 7:return a.abrupt("return",a.sent);case 8:case"end":return a.stop()}}))}function x(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(fetch(e,{method:"POST",body:null!==t?JSON.stringify(t):"",cache:"no-cache",headers:{"Content-Type":"application/json"},credentials:"include"}));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))}function C(e){return e instanceof Date?e.toLocaleString("en-us"):new Date(e).toLocaleString("en-US")}var k=function(){function e(){Object(w.a)(this,e),this.device_id="",this.device_type="",this.unitcode="",this.direction=0,this.location_timestamp=new Date,this.satellite_count=0,this.velocity=0,this.latitude=0,this.longitude=0,this.updated_on=new Date,this.error_information=[],this.show_unit_options=!1,this.show_errors=!1,this.has_date_error=!1,this.has_location_error=!1,this.has_unit_error=!1,this.device_history=[]}return Object(b.a)(e,null,[{key:"Get",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N("API/AVL/Get"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}},{key:"Delete",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(x("API/AVL/Delete?device_id="+e,{}));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}},{key:"Update",value:function(e,t,a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(x("API/AVL/Update?device_id=".concat(e,"&device_type=").concat(t,"&unitcode=").concat(a),{}));case 2:return n=r.sent,r.abrupt("return",n);case 4:case"end":return r.stop()}}))}}]),e}(),D=function(e){return e.show_errors?r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:e.colspan-1},r.a.createElement("ul",null,e.error_information.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))):null},O=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1];return e.show_unit_options?r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Current Unit:"),r.a.createElement("td",null,0===e.unitcode.length?"None":e.unitcode),r.a.createElement("td",{className:"has-text-right"},"Change To:"),r.a.createElement("td",{colSpan:2},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small",type:"text",onChange:function(e){return l(e.target.value)},value:c,placeholder:"New Unit"})),r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"button",onClick:function(t){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:t.preventDefault(),console.log("props asset_tag",e.asset_tag),e.asset_tag?e.update_data(e.asset_tag,c.trim()):e.update_data(e.device_id,e.device_type,c.trim());case 3:case"end":return a.stop()}}))},className:"button is-success is-small"},"Save"))))):null},S=function(){function e(){Object(w.a)(this,e),this.id=-1,this.unitcode="",this.field="",this.changed_from="",this.changed_to="",this.changed_on=new Date,this.changed_by="",this.error_message=""}return Object(b.a)(e,null,[{key:"GetByUnit",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(N("API/History/Unit?unit="+e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}},{key:"GetByDeviceId",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(N("API/History/DeviceId?deviceId="+e));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}}]),e}(),j=function(e){return e.history&&0!==e.history.length?r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:e.colspan-1},r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"has-text-centered",colSpan:e.colspan},e.title)),r.a.createElement("tr",null,r.a.createElement("th",null,"Unitcode"),r.a.createElement("th",null,"Field"),r.a.createElement("th",null,"Changed From"),r.a.createElement("th",null,"Changed To"),r.a.createElement("th",null,"Changed On"),r.a.createElement("th",null,"Changed By"))),r.a.createElement("tbody",null,e.history.map((function(e){return e.error_message.length>0?r.a.createElement("tr",{key:e.id},r.a.createElement("td",{colSpan:6},e.error_message)):r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.unitcode),r.a.createElement("td",null,e.field),r.a.createElement("td",null,e.changed_from),r.a.createElement("td",null,e.changed_to),r.a.createElement("td",null,C(e.changed_on)),r.a.createElement("td",null,e.changed_by))})))))):null},A=function(e){var t=r.a.useContext(d).dispatch,a=function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(k.Get());case 2:return e=a.sent,a.abrupt("return",t({type:"get_avl_data",payload:e}));case 4:case"end":return a.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,e.device_id),r.a.createElement("td",null,r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas ".concat("Phone Number"===e.device_type?"fa-phone":"fa-sim-card")}))),r.a.createElement("td",null,r.a.createElement("span",{title:"Change this Device's unit",className:"cursor_pointer has-text-link",onClick:function(a){t({type:"avl_data_toggle_show_unit_options",payload:e.device_id})}},0===e.unitcode.length?"Add":e.unitcode)),r.a.createElement("td",null,C(e.updated_on)),r.a.createElement("td",null,C(e.location_timestamp)),r.a.createElement("td",{className:"has-text-right icon-options"},e.error_information.length>0?r.a.createElement("span",{title:"View Errors",className:"icon cursor_pointer has-text-warning",onClick:function(a){t({type:"avl_data_toggle_show_errors",payload:e.device_id})}},r.a.createElement("i",{className:"fas fa-exclamation-circle"})):"",r.a.createElement("span",{title:"View History",className:"icon cursor_pointer has-text-link",onClick:function(a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),e.device_history&&0!==e.device_history.length){r.next=8;break}return r.next=4,E.a.awrap(S.GetByDeviceId(e.device_id));case 4:n=r.sent,t({type:"avl_device_history",payload:{device_id:e.device_id,device_history:n}}),r.next=9;break;case 8:t({type:"avl_device_history",payload:{device_id:e.device_id,device_history:[]}});case 9:case"end":return r.stop()}}))}},r.a.createElement("i",{className:"fas fa-history"})),r.a.createElement("span",{title:"Delete This Device",className:"icon cursor_pointer has-text-danger",onClick:function(t){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,E.a.awrap(k.Delete(e.device_id));case 3:n.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 5:case"end":return n.stop()}}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})))),r.a.createElement(O,Object.assign({colspan:7,new_unitcode:"",update_data:function(e,t,n){return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E.a.awrap(k.Update(e,t,n));case 2:r.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 4:case"end":return r.stop()}}))}},e)),r.a.createElement(D,{colspan:7,error_information:e.error_information,show_errors:e.show_errors}),r.a.createElement(j,{colspan:7,title:"History By Device Id",history:e.device_history}))},L=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,c=Object(n.useState)(t.avl_data_filter||""),l=Object(i.a)(c,2),s=l[0],o=l[1];return r.a.createElement("section",null,r.a.createElement("div",{style:{padding:"1em",marginBottom:0},className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item is-size-3 has-text-weight-bold"},"AVL"),r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{title:"Search for text in the Device Id and Unit fields.  Hit Enter to Search.",type:"text",placeholder:"Search",onChange:function(e){return o(e.target.value)},value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a({type:"search_avl_data",payload:s}))}})))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){var e;E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(k.Get());case 2:return e=t.sent,t.abrupt("return",a({type:"get_avl_data",payload:e}));case 4:case"end":return t.stop()}}))}()},title:"Refresh the AVL Data",type:"button",className:"button is-success is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement("button",{style:{marginLeft:".5em"},onClick:function(e){e.preventDefault(),e.stopPropagation(),o(""),a({type:"search_avl_data",payload:""})},title:"Reset the Search",type:"button",className:"button is-warning is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-undo-alt"}))))),r.a.createElement("div",{className:"level-right"},r.a.createElement("p",{className:"level-item has-text-weight-bold"},"Error Filters"),r.a.createElement("div",{className:"level-item tabs"},r.a.createElement("ul",null,r.a.createElement("li",{className:"".concat(""===t.avl_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#NoFilter",onClick:function(e){a({type:"avl_data_special_filter",payload:""})}},"Show All")),r.a.createElement("li",{className:"".concat("error"===t.avl_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AllErrors",onClick:function(e){a({type:"avl_data_special_filter",payload:"error"})}},"All Errors")),r.a.createElement("li",{className:"".concat("unit"===t.avl_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#UnitErrors",onClick:function(e){a({type:"avl_data_special_filter",payload:"unit"})}},"Unit")),r.a.createElement("li",{className:"".concat("date"===t.avl_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#DateErrors",onClick:function(e){a({type:"avl_data_special_filter",payload:"date"})}},"Date")),r.a.createElement("li",{className:"".concat("location"===t.avl_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#LocationErrors",onClick:function(e){a({type:"avl_data_special_filter",payload:"location"})}},"Location")))))),r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByDeviceId",onClick:function(e){e.preventDefault(),a({type:"avl_data_sort",payload:"device_id"})},className:"".concat("device_id"!==t.avl_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Device Id")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByDeviceType",onClick:function(e){e.preventDefault(),a({type:"avl_data_sort",payload:"device_type"})},className:"".concat("device_type"!==t.avl_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Type")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUnit",onClick:function(e){e.preventDefault(),a({type:"avl_data_sort",payload:"unitcode"})},className:"".concat("unitcode"!==t.avl_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Unit")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByDateSavedOn",onClick:function(e){e.preventDefault(),a({type:"avl_data_sort",payload:"updated_on"})},className:"".concat("updated_on"!==t.avl_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Data Saved On")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByLocationDate",onClick:function(e){e.preventDefault(),a({type:"avl_data_sort",payload:"location_timestamp"})},className:"".concat("location_timestamp"!==t.avl_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Location On")),r.a.createElement("th",{className:"has-text-centered"},"Options"))),r.a.createElement("tbody",null,t.filtered_avl_data.map((function(e,t){return r.a.createElement(A,Object.assign({key:e.device_id,index:t},e))})))))},U=function(){function e(){Object(w.a)(this,e),this.device_id="",this.asset_tag="",this.unitcode="",this.vin="",this.make="",this.model="",this.vehicle_year="",this.direction=0,this.location_timestamp=new Date,this.updated_on=new Date,this.velocity=0,this.latitude=0,this.longitude=0,this.error_information=[],this.show_unit_options=!1,this.show_errors=!1,this.has_date_error=!1,this.has_location_error=!1,this.has_asset_tag_error=!1,this.has_unit_error=!1,this.device_history=[]}return Object(b.a)(e,null,[{key:"Get",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N("API/FC/Get"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}},{key:"Delete",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(x("API/FC/Delete?device_id="+e,{}));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}},{key:"Update",value:function(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(x("API/FC/Update?asset_tag=".concat(e,"&unitcode=").concat(t),{}));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))}}]),e}(),G=function(e){var t=r.a.useContext(d).dispatch,a=function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(U.Get());case 2:return e=a.sent,a.abrupt("return",t({type:"get_fc_data",payload:e}));case 4:case"end":return a.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,e.device_id.replace(/^0+/,"")),r.a.createElement("td",null,e.asset_tag===e.device_id?"":e.asset_tag),r.a.createElement("td",null,r.a.createElement("span",{title:"Change this Device's unit",className:"cursor_pointer has-text-link",onClick:function(a){t({type:"fc_data_toggle_show_unit_options",payload:e.device_id})}},0===e.unitcode.length?"Add":e.unitcode)),r.a.createElement("td",null,C(e.updated_on)),r.a.createElement("td",null,C(e.location_timestamp)),r.a.createElement("td",{className:"has-text-right icon-options"},e.error_information.length>0?r.a.createElement("span",{title:"View Errors",className:"icon cursor_pointer has-text-warning",onClick:function(a){t({type:"fc_data_toggle_show_errors",payload:e.device_id})}},r.a.createElement("i",{className:"fas fa-exclamation-circle"})):"",r.a.createElement("span",{title:"View History",className:"icon cursor_pointer has-text-link",onClick:function(a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),e.device_history&&0!==e.device_history.length){r.next=8;break}return r.next=4,E.a.awrap(S.GetByDeviceId(e.asset_tag));case 4:n=r.sent,t({type:"fc_device_history",payload:{device_id:e.device_id,device_history:n}}),r.next=9;break;case 8:t({type:"fc_device_history",payload:{device_id:e.device_id,device_history:[]}});case 9:case"end":return r.stop()}}))}},r.a.createElement("i",{className:"fas fa-history"})),r.a.createElement("span",{title:"Delete This Device",className:"icon cursor_pointer has-text-danger",onClick:function(t){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,E.a.awrap(U.Delete(e.device_id));case 3:n.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 5:case"end":return n.stop()}}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})))),r.a.createElement(O,Object.assign({colspan:7,new_unitcode:"",update_data:function(e,t){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(U.Update(e,t));case 2:n.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 4:case"end":return n.stop()}}))}},e)),r.a.createElement(D,{colspan:7,error_information:e.error_information,show_errors:e.show_errors}),r.a.createElement(j,{colspan:7,title:"History By Device Id",history:e.device_history}))},I=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,c=Object(n.useState)(t.fc_data_filter||""),l=Object(i.a)(c,2),s=l[0],o=l[1];return r.a.createElement("section",null,r.a.createElement("div",{style:{padding:"1em",marginBottom:0},className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item is-size-3 has-text-weight-bold"},"FC"),r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{title:"Search for text in the Device Id, Unit, and Asset Tag fields.  Hit Enter to Search.",type:"text",placeholder:"Search",onChange:function(e){return o(e.target.value)},value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a({type:"search_fc_data",payload:e.target.value}))}})))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){var e;E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(U.Get());case 2:return e=t.sent,t.abrupt("return",a({type:"get_fc_data",payload:e}));case 4:case"end":return t.stop()}}))}()},title:"Refresh the Fleet Complete Data",type:"button",className:"button is-success is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement("button",{style:{marginLeft:".5em"},onClick:function(e){e.preventDefault(),e.stopPropagation(),o(""),a({type:"search_fc_data",payload:""})},title:"Reset the Search",type:"button",className:"button is-warning is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-undo-alt"}))))),r.a.createElement("div",{className:"level-right"},r.a.createElement("p",{className:"level-item has-text-weight-bold"},"Error Filters"),r.a.createElement("div",{className:"level-item tabs"},r.a.createElement("ul",null,r.a.createElement("li",{className:"".concat(""===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#NoFilter",onClick:function(e){a({type:"fc_data_special_filter",payload:""})}},"Show All")),r.a.createElement("li",{className:"".concat("error"===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AllErrors",onClick:function(e){a({type:"fc_data_special_filter",payload:"error"})}},"Errors")),r.a.createElement("li",{className:"".concat("unit"===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AssetTagErrors",onClick:function(e){a({type:"fc_data_special_filter",payload:"asset_tag"})}},"Asset Tag")),r.a.createElement("li",{className:"".concat("unit"===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#UnitErrors",onClick:function(e){a({type:"fc_data_special_filter",payload:"unit"})}},"Unit")),r.a.createElement("li",{className:"".concat("date"===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#DateErrors",onClick:function(e){a({type:"fc_data_special_filter",payload:"date"})}},"Date")),r.a.createElement("li",{className:"".concat("location"===t.fc_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#LocationErrors",onClick:function(e){a({type:"fc_data_special_filter",payload:"location"})}},"Location")))))),r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"#"),r.a.createElement("th",{style:{width:"10%"}},r.a.createElement("a",{href:"#SortByDeviceId",onClick:function(e){e.preventDefault(),a({type:"fc_data_sort",payload:"device_id"})},className:"".concat("device_id"!==t.fc_data_sort_field?"":t.fc_data_sort_ascending?"sort_ascending":"sort_descending")},"Device Id")),r.a.createElement("th",{style:{width:"10%"}},r.a.createElement("a",{href:"#SortByAssetTag",onClick:function(e){e.preventDefault(),a({type:"fc_data_sort",payload:"asset_tag"})},className:"".concat("asset_tag"!==t.fc_data_sort_field?"":t.fc_data_sort_ascending?"sort_ascending":"sort_descending")},"Asset Tag")),r.a.createElement("th",{style:{width:"10%"}},r.a.createElement("a",{href:"#SortByUnit",onClick:function(e){e.preventDefault(),a({type:"fc_data_sort",payload:"unitcode"})},className:"".concat("unitcode"!==t.fc_data_sort_field?"":t.fc_data_sort_ascending?"sort_ascending":"sort_descending")},"Unit")),r.a.createElement("th",{style:{width:"25%"}},r.a.createElement("a",{href:"#SortByDateSavedOn",onClick:function(e){e.preventDefault(),a({type:"fc_data_sort",payload:"updated_on"})},className:"".concat("updated_on"!==t.fc_data_sort_field?"":t.fc_data_sort_ascending?"sort_ascending":"sort_descending")},"Data Saved On")),r.a.createElement("th",{style:{width:"25%"}},r.a.createElement("a",{href:"#SortByLocationDate",onClick:function(e){e.preventDefault(),a({type:"fc_data_sort",payload:"location_timestamp"})},className:"".concat("location_timestamp"!==t.fc_data_sort_field?"":t.fc_data_sort_ascending?"sort_ascending":"sort_descending")},"Location On")),r.a.createElement("th",{style:{width:"15%"},className:"has-text-centered"},"Options"))),r.a.createElement("tbody",null,t.filtered_fc_data.map((function(e,t){return r.a.createElement(G,Object.assign({key:e.device_id,index:t},e))})))))},B=function(){function e(){Object(w.a)(this,e),this.unitcode="",this.location_timestamp=new Date,this.inci_id="",this.status="",this.avstatus="",this.latitude=0,this.longitude=0,this.speed=0,this.heading=0,this.updated_on=new Date,this.error_information=[],this.show_unit_options=!1,this.show_errors=!1,this.has_date_error=!1,this.has_location_error=!1,this.has_unit_error=!1,this.device_history=[]}return Object(b.a)(e,null,[{key:"Get",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N("API/CAD/Get"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}},{key:"Delete",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(x("API/CAD/Delete?unitcode="+e,{}));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}}]),e}(),F=function(e){var t=r.a.useContext(d).dispatch,a=function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(B.Get());case 2:return e=a.sent,a.abrupt("return",t({type:"get_cad_data",payload:e}));case 4:case"end":return a.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,e.unitcode),r.a.createElement("td",null,e.inci_id.trim().length>0?"On A Call":""),r.a.createElement("td",null,e.status),r.a.createElement("td",null,e.avstatus),r.a.createElement("td",null,C(e.updated_on)),r.a.createElement("td",null,C(e.location_timestamp)),r.a.createElement("td",{className:"has-text-right icon-options"},e.error_information.length>0?r.a.createElement("span",{title:"View Errors",className:"icon cursor_pointer has-text-warning",onClick:function(a){t({type:"cad_data_toggle_show_errors",payload:e.unitcode})}},r.a.createElement("i",{className:"fas fa-exclamation-circle"})):"",r.a.createElement("span",{title:"View History",className:"icon cursor_pointer has-text-link",onClick:function(a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),e.device_history&&0!==e.device_history.length){r.next=8;break}return r.next=4,E.a.awrap(S.GetByDeviceId(e.unitcode));case 4:n=r.sent,t({type:"cad_device_history",payload:{unitcode:e.unitcode,device_history:n}}),r.next=9;break;case 8:t({type:"cad_device_history",payload:{unitcode:e.unitcode,device_history:[]}});case 9:case"end":return r.stop()}}))}},r.a.createElement("i",{className:"fas fa-history"})),r.a.createElement("span",{title:"Delete This Device",className:"icon cursor_pointer has-text-danger",onClick:function(t){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,E.a.awrap(B.Delete(e.unitcode));case 3:n.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 5:case"end":return n.stop()}}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})))),r.a.createElement(D,{colspan:8,error_information:e.error_information,show_errors:e.show_errors}),r.a.createElement(j,{colspan:8,title:"History By Device Id",history:e.device_history}))},P=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,c=Object(n.useState)(t.cad_data_filter||""),l=Object(i.a)(c,2),s=l[0],o=l[1];return r.a.createElement("section",null,r.a.createElement("div",{style:{padding:"1em",marginBottom:0},className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item is-size-3 has-text-weight-bold"},"CAD"),r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{title:"Search for text in the UnitCode field.  Hit Enter to Search.",type:"text",placeholder:"Search",onChange:function(e){return o(e.target.value)},value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a({type:"search_cad_data",payload:e.target.value}))}})))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){var e;E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(B.Get());case 2:return e=t.sent,t.abrupt("return",a({type:"get_cad_data",payload:e}));case 4:case"end":return t.stop()}}))}()},title:"Refresh the CAD Data",type:"button",className:"button is-success is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement("button",{style:{marginLeft:".5em"},onClick:function(e){e.preventDefault(),e.stopPropagation(),o(""),a({type:"search_cad_data",payload:""})},title:"Reset the Search",type:"button",className:"button is-warning is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-undo-alt"}))))),r.a.createElement("div",{className:"level-right"},r.a.createElement("p",{className:"level-item has-text-weight-bold"},"Error Filters"),r.a.createElement("div",{className:"level-item tabs"},r.a.createElement("ul",null,r.a.createElement("li",{className:"".concat(""===t.cad_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#NoFilter",onClick:function(e){a({type:"cad_data_special_filter",payload:""})}},"Show All")),r.a.createElement("li",{className:"".concat("error"===t.cad_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AllErrors",onClick:function(e){a({type:"cad_data_special_filter",payload:"error"})}},"Errors")),r.a.createElement("li",{className:"".concat("date"===t.cad_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#DateErrors",onClick:function(e){a({type:"cad_data_special_filter",payload:"date"})}},"Date")),r.a.createElement("li",{className:"".concat("location"===t.cad_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#LocationErrors",onClick:function(e){a({type:"cad_data_special_filter",payload:"location"})}},"Location")))))),r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUnitCode",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"unitcode"})},className:"".concat("unitcode"!==t.cad_data_sort_field?"":t.avl_data_sort_ascending?"sort_ascending":"sort_descending")},"Unit Code")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByCallStatus",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"inci_id"})},className:"".concat("inci_id"!==t.cad_data_sort_field?"":t.cad_data_sort_ascending?"sort_ascending":"sort_descending")},"Call Status")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUnitStatus",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"status"})},className:"".concat("status"!==t.cad_data_sort_field?"":t.cad_data_sort_ascending?"sort_ascending":"sort_descending")},"Status")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUnitAVStatus",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"avstatus"})},className:"".concat("avstatus"!==t.cad_data_sort_field?"":t.cad_data_sort_ascending?"sort_ascending":"sort_descending")},"AV Status")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByDateSavedOn",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"updated_on"})},className:"".concat("updated_on"!==t.cad_data_sort_field?"":t.cad_data_sort_ascending?"sort_ascending":"sort_descending")},"Data Saved On")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByLocationDate",onClick:function(e){e.preventDefault(),a({type:"cad_data_sort",payload:"location_timestamp"})},className:"".concat("location_timestamp"!==t.cad_data_sort_field?"":t.cad_data_sort_ascending?"sort_ascending":"sort_descending")},"Location On")),r.a.createElement("th",{className:"has-text-centered"},"Options"))),r.a.createElement("tbody",null,t.filtered_cad_data.map((function(e,t){return r.a.createElement(F,Object.assign({key:e.unitcode,index:t},e))})))))},V=function(){function e(){Object(w.a)(this,e),this.unitcode="",this.using_unit="",this.group_label="",this.show_in_minicad=!1,this.avl_longitude=0,this.avl_latitude=0,this.avl_location_timestamp=new Date,this.has_avl_device=!1,this.has_avl_error=!1,this.fc_longitude=0,this.fc_latitude=0,this.fc_location_timestamp=new Date,this.has_fc_device=!1,this.has_fc_error=!1,this.cad_longitude=0,this.cad_latitude=0,this.cad_location_timestamp=new Date,this.should_have_cad_location=!1,this.has_cad_error=!1,this.error_information=[],this.show_errors=!1,this.show_unit_options=!1,this.device_history=[]}return Object(b.a)(e,null,[{key:"Get",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N("API/Unit/Get"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}},{key:"Delete",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(x("API/Unit/Delete?unitcode="+e,{}));case 2:return t=a.sent,a.abrupt("return",t);case 4:case"end":return a.stop()}}))}},{key:"Update",value:function(e,t,a,n,r){var c;return E.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E.a.awrap(x("API/Unit/Update?unitcode=".concat(e,"&group=").concat(t,"&has_avl=").concat(a,"&has_fc=").concat(n,"&should_have_cad=").concat(r),{}));case 2:return c=l.sent,l.abrupt("return",c);case 4:case"end":return l.stop()}}))}},{key:"Add",value:function(e,t,a,n,r){var c;return E.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E.a.awrap(x("API/Unit/Add?unitcode=".concat(e,"&group=").concat(t,"&has_avl=").concat(a,"&has_fc=").concat(n,"&should_have_cad=").concat(r),{}));case 2:return c=l.sent,l.abrupt("return",c);case 4:case"end":return l.stop()}}))}}]),e}(),T=function(e){var t=r.a.useContext(d),a=t.state,c=t.dispatch,l=Object(n.useState)(e.unitcode),s=Object(i.a)(l,2),o=(s[0],s[1],Object(n.useState)(function(e){if(0===e.length)return e;var t=a.unit_groups.filter((function(t){return t.label===e}));return t.length>0?t[0].value:""}(e.group_label))),u=Object(i.a)(o,2),_=u[0],m=u[1],p=Object(n.useState)(e.has_avl_device),f=Object(i.a)(p,2),h=f[0],v=f[1],y=Object(n.useState)(e.has_fc_device),g=Object(i.a)(y,2),w=g[0],b=g[1],N=Object(n.useState)(e.should_have_cad_location),x=Object(i.a)(N,2),C=x[0],k=x[1];return e.show_unit_options?r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Group:"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{value:_,onChange:function(e){m(e.target.value)}},r.a.createElement("option",{value:""},"No Group"),a.unit_groups.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Has AVL Device"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:h,onChange:function(e){return v(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Has Fleet Complete Device"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:w,onChange:function(e){return b(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Should Have CAD Location"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:C,onChange:function(e){return k(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3}),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{onClick:function(t){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,E.a.awrap(V.Update(e.unitcode,_,h,w,C));case 3:a.sent.ok?e.refresh_data():alert("There was a problem updating this record. Please contact MIS Development for more information.");case 5:case"end":return a.stop()}}))},title:"This will save all of the selections above",className:"is-success button is-small"},"Save"),r.a.createElement("button",{title:"Close the Unit Options menu without saving any changes",style:{marginLeft:"1em"},className:"is-warning button is-small",onClick:function(t){c({type:"unit_data_toggle_show_unit_options",payload:e.unitcode})}},"Cancel")))),r.a.createElement("td",{colSpan:4}))):null},M=function(e){var t=r.a.useContext(d).dispatch,a=function(){var e;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(V.Get());case 2:return e=a.sent,a.abrupt("return",t({type:"get_unit_data",payload:e}));case 4:case"end":return a.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,r.a.createElement("span",{title:"Change this Unit's Information",className:"cursor_pointer has-text-link",onClick:function(a){t({type:"unit_data_toggle_show_unit_options",payload:e.unitcode})}},e.unitcode)),r.a.createElement("td",null,e.using_unit),r.a.createElement("td",null,e.group_label),r.a.createElement("td",null,0!==e.avl_latitude?r.a.createElement("span",{title:"View this on the Map",className:"icon"},r.a.createElement("i",{className:"fas fa-eye"})):"",new Date(e.avl_location_timestamp).getFullYear()>1995?r.a.createElement("span",{style:{marginLeft:".5em"},title:"View this on the AVL Menu",className:"icon cursor_pointer",onClick:function(a){t({type:"view_avl_by_unit",payload:e.unitcode})}},r.a.createElement("i",{className:"fas fa-edit"})):""),r.a.createElement("td",null,0!==e.fc_latitude?r.a.createElement("span",{title:"View this on the Map",className:"icon"},r.a.createElement("i",{className:"fas fa-eye"})):"",new Date(e.fc_location_timestamp).getFullYear()>1995?r.a.createElement("span",{style:{marginLeft:".5em"},title:"View this on the Fleet Complete Menu",className:"icon cursor_pointer",onClick:function(a){t({type:"view_fc_by_unit",payload:e.unitcode})}},r.a.createElement("i",{className:"fas fa-edit"})):""),r.a.createElement("td",null,0!==e.cad_latitude?r.a.createElement("span",{title:"View this on the Map",className:"icon"},r.a.createElement("i",{className:"fas fa-eye"})):"",new Date(e.cad_location_timestamp).getFullYear()>1995?r.a.createElement("span",{style:{marginLeft:".5em"},title:"View this on the CAD Menu",className:"icon cursor_pointer",onClick:function(a){t({type:"view_cad_by_unit",payload:e.unitcode})}},r.a.createElement("i",{className:"fas fa-edit"})):""),r.a.createElement("td",{className:"has-text-right icon-options"},e.error_information.length>0?r.a.createElement("span",{title:"View Errors",className:"icon cursor_pointer has-text-warning",onClick:function(a){t({type:"unit_data_toggle_show_errors",payload:e.unitcode})}},r.a.createElement("i",{className:"fas fa-exclamation-circle"})):"",r.a.createElement("span",{title:"View History",className:"icon cursor_pointer has-text-link",onClick:function(a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),e.device_history&&0!==e.device_history.length){r.next=8;break}return r.next=4,E.a.awrap(S.GetByUnit(e.unitcode));case 4:n=r.sent,t({type:"unit_device_history",payload:{unitcode:e.unitcode,device_history:n}}),r.next=9;break;case 8:t({type:"unit_device_history",payload:{unitcode:e.unitcode,device_history:[]}});case 9:case"end":return r.stop()}}))}},r.a.createElement("i",{className:"fas fa-history"})),1995===new Date(e.avl_location_timestamp).getFullYear()&&1995===new Date(e.fc_location_timestamp).getFullYear()&&1995===new Date(e.cad_location_timestamp).getFullYear()?r.a.createElement("span",{style:{marginLeft:".5em"},title:"Delete This Device",className:"icon cursor_pointer has-text-danger",onClick:function(t){return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,E.a.awrap(V.Delete(e.unitcode));case 3:n.sent.ok?a():alert("There was a problem with deleting this record. Please contact MIS Development for more information.");case 5:case"end":return n.stop()}}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})):"")),r.a.createElement(T,Object.assign({colspan:8,refresh_data:a},e)),r.a.createElement(D,{colspan:8,error_information:e.error_information,show_errors:e.show_errors}),r.a.createElement(j,{colspan:8,title:"History By Device Id",history:e.device_history}))},H=function(e){var t=r.a.useContext(d),a=t.state,c=t.dispatch,l=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(V.Get());case 2:return e=t.sent,t.abrupt("return",c({type:"get_unit_data",payload:e}));case 4:case"end":return t.stop()}}))},s=Object(n.useState)(e.unitcode),o=Object(i.a)(s,2),u=o[0],_=o[1],m=Object(n.useState)(function(e){if(0===e.length)return e;var t=a.unit_groups.filter((function(t){return t.label===e}));return t.length>0?t[0].value:""}(e.group_label)),p=Object(i.a)(m,2),f=p[0],h=p[1],v=Object(n.useState)(e.has_avl_device),y=Object(i.a)(v,2),g=y[0],w=y[1],b=Object(n.useState)(e.has_fc_device),N=Object(i.a)(b,2),x=N[0],C=N[1],k=Object(n.useState)(e.should_have_cad_location),D=Object(i.a)(k,2),O=D[0],S=D[1];return e.show_add_unit?r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Unit Code"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{value:u,onChange:function(e){return _(e.target.value)},type:"text"})))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Group:"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{value:f,onChange:function(e){console.log("event",e,e.target.value),h(e.target.value)}},r.a.createElement("option",{value:""},"No Group"),a.unit_groups.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)}))))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Has AVL Device"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:g,onChange:function(e){return w(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Has Fleet Complete Device"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:x,onChange:function(e){return C(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",{colSpan:2,className:"has-text-right"},"Should Have CAD Location"),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{checked:O,onChange:function(e){return S(e.target.checked)},type:"checkbox"}))))),r.a.createElement("td",{colSpan:4})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3}),r.a.createElement("td",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{onClick:function(t){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.next=3,E.a.awrap(V.Add(u,f,g,x,O));case 3:a.sent.ok?(l(),_(""),w(!1),C(!1),S(!1),h(""),e.cancel()):alert("There was a problem updating this record. Please contact MIS Development for more information.");case 5:case"end":return a.stop()}}))},title:"This will save all of the selections above",className:"is-success button is-small"},"Save"),r.a.createElement("button",{title:"Close the Unit Options menu without saving any changes",style:{marginLeft:"1em"},className:"is-warning button is-small",onClick:function(t){e.cancel()}},"Cancel")))),r.a.createElement("td",{colSpan:4}))):null},z=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,c=Object(n.useState)(t.avl_data_filter||""),l=Object(i.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(!1),_=Object(i.a)(u,2),m=_[0],p=_[1];return r.a.createElement("section",null,r.a.createElement("div",{style:{padding:"1em",marginBottom:0},className:"level"},r.a.createElement("div",{className:"level-left"},r.a.createElement("div",{className:"level-item is-size-3 has-text-weight-bold"},"Unit"),r.a.createElement("div",{className:"level-item"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{title:"Search for text in the Device Id, Unit, and Asset Tag fields.  Hit Enter to Search.",type:"text",placeholder:"Search",onChange:function(e){return o(e.target.value)},value:s,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a({type:"search_unit_data",payload:e.target.value}))}})))),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){var e;E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(V.Get());case 2:return e=t.sent,t.abrupt("return",a({type:"get_unit_data",payload:e}));case 4:case"end":return t.stop()}}))}()},title:"Refresh the Unit Data",type:"button",className:"button is-success is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-sync-alt"}))),r.a.createElement("button",{style:{marginLeft:".5em"},onClick:function(e){e.preventDefault(),e.stopPropagation(),o(""),a({type:"search_unit_data",payload:""})},title:"Reset the Search",type:"button",className:"button is-warning is-small"},r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-undo-alt"}))))),r.a.createElement("div",{className:"level-right"},r.a.createElement("p",{className:"level-item has-text-weight-bold"},"Error Filters"),r.a.createElement("div",{className:"level-item tabs"},r.a.createElement("ul",null,r.a.createElement("li",{className:"".concat(""===t.unit_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#NoFilter",onClick:function(e){a({type:"unit_data_special_filter",payload:""})}},"Show All")),r.a.createElement("li",{className:"".concat("error"===t.unit_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AllErrors",onClick:function(e){a({type:"unit_data_special_filter",payload:"error"})}},"Errors")),r.a.createElement("li",{className:"".concat("unit"===t.unit_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#AssetTagErrors",onClick:function(e){a({type:"unit_data_special_filter",payload:"avl"})}},"AVL")),r.a.createElement("li",{className:"".concat("unit"===t.unit_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#UnitErrors",onClick:function(e){a({type:"unit_data_special_filter",payload:"fc"})}},"FC")),r.a.createElement("li",{className:"".concat("date"===t.unit_data_special_filter?"is-active":"")},r.a.createElement("a",{href:"#DateErrors",onClick:function(e){a({type:"unit_data_special_filter",payload:"cad"})}},"CAD")))))),r.a.createElement("table",{className:"table is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUnitCode",onClick:function(e){e.preventDefault(),a({type:"unit_data_sort",payload:"unitcode"})},className:"".concat("unitcode"!==t.unit_data_sort_field?"":t.unit_data_sort_ascending?"sort_ascending":"sort_descending")},"Unit"),r.a.createElement("span",{style:{marginLeft:"1em"},title:"Add A Unit",className:"icon cursor_pointer has-text-danger",onClick:function(e){p(!m)}},r.a.createElement("i",{className:"fas fa-plus-circle"}))),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByUsingUnit",onClick:function(e){e.preventDefault(),a({type:"unit_data_sort",payload:"using_unit"})},className:"".concat("using_unit"!==t.unit_data_sort_field?"":t.unit_data_sort_ascending?"sort_ascending":"sort_descending")},"Using Unit")),r.a.createElement("th",null,r.a.createElement("a",{href:"#SortByGroup",onClick:function(e){e.preventDefault(),a({type:"unit_data_sort",payload:"group_label"})},className:"".concat("group_label"!==t.unit_data_sort_field?"":t.unit_data_sort_ascending?"sort_ascending":"sort_descending")},r.a.createElement("span",{title:"View this on the Map",className:"icon"},r.a.createElement("i",{className:"fas fa-sort"}))),r.a.createElement("div",{style:{display:"inline-block"},className:"control"},r.a.createElement("div",{className:"select is-small"},r.a.createElement("select",{onChange:function(e){var t=e.target.options[e.target.selectedIndex].innerText;"All Groups"===t&&(t=""),o(t),a({type:"search_unit_data",payload:t})}},r.a.createElement("option",{value:""},"All Groups"),t.unit_groups.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))))),r.a.createElement("th",null,"AVL"),r.a.createElement("th",null,"FC"),r.a.createElement("th",null,"CAD"),r.a.createElement("th",{className:"has-text-centered"},"Options"))),r.a.createElement("tbody",null,r.a.createElement(H,{unitcode:"",has_avl_device:!1,has_fc_device:!1,should_have_cad_location:!1,group_label:"",show_add_unit:m,cancel:function(){p(!1)}}),t.filtered_unit_data.map((function(e,t){return r.a.createElement(M,Object.assign({key:e.unitcode,index:t},e))})))))},R=a(6),Y=function(){var e=r.a.useContext(d),t=e.state,a=(e.dispatch,Object(n.useState)(null)),c=Object(i.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){return console.log("loading avl layer",t.map,t.filtered_avl_data),null!==t.map&&t.filtered_avl_data.length>0&&Object(R.loadModules)(["esri/layers/GraphicsLayer","esri/Graphic"]).then((function(e){var a=Object(i.a)(e,2),n=a[0],r=a[1];console.log("looping");var c=null===l?new n:l;c.graphics.length>0&&c.removeAll(),c.title="AVL Units";var o=!0,d=!1,u=void 0;try{for(var _,m=t.filtered_avl_data[Symbol.iterator]();!(o=(_=m.next()).done);o=!0){var p=_.value,f={type:"point",longitude:p.longitude,latitude:p.latitude},h=new r({geometry:f,symbol:{type:"simple-marker",color:[225,0,0]}}),v=new r({geometry:f,symbol:{type:"text",color:"black",halo:"white",haloSize:"3px",xoffset:9,yoffset:-2,text:"AVL - "+(p.unitcode.length>0?p.unitcode:p.device_id),horizontalAlignment:"left",font:{size:10}}});c.add(h),c.add(v)}}catch(y){d=!0,u=y}finally{try{o||null==m.return||m.return()}finally{if(d)throw u}}s(c),t.map.add(c)})).catch((function(e){return console.error(e)})),function(){null!==t.map&&t.map.remove(l)}}),[t.map,t.filtered_avl_data]),null},K=function(){var e=r.a.useContext(d),t=e.state,a=(e.dispatch,Object(n.useState)(null)),c=Object(i.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){return console.log("loading fc layer",t.map,t.filtered_fc_data),null!==t.map&&t.filtered_fc_data.length>0&&Object(R.loadModules)(["esri/layers/GraphicsLayer","esri/Graphic"]).then((function(e){var a=Object(i.a)(e,2),n=a[0],r=a[1];console.log("FC looping");var c=null===l?new n:l;c.graphics.length>0&&c.removeAll(),c.title="FleetComplete Units";var o=!0,d=!1,u=void 0;try{for(var _,m=t.filtered_fc_data[Symbol.iterator]();!(o=(_=m.next()).done);o=!0){var p=_.value,f={type:"point",longitude:p.longitude,latitude:p.latitude},h=new r({geometry:f,symbol:{type:"simple-marker",color:[0,225,0]}}),v=new r({geometry:f,symbol:{type:"text",color:"black",halo:"white",haloSize:"3px",xoffset:9,yoffset:-2,text:"FC - "+(p.unitcode.length>0?p.unitcode:p.device_id),horizontalAlignment:"left",font:{size:10}}});c.add(h),c.add(v)}}catch(y){d=!0,u=y}finally{try{o||null==m.return||m.return()}finally{if(d)throw u}}s(c),t.map.add(c)})).catch((function(e){return console.error(e)})),function(){null!==t.map&&t.map.remove(l)}}),[t.map,t.filtered_fc_data]),null},J=function(){var e=r.a.useContext(d),t=e.state,a=(e.dispatch,Object(n.useState)(null)),c=Object(i.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){return console.log("loading fc layer",t.map,t.filtered_fc_data),null!==t.map&&t.filtered_cad_data.length>0&&Object(R.loadModules)(["esri/layers/GraphicsLayer","esri/Graphic"]).then((function(e){var a=Object(i.a)(e,2),n=a[0],r=a[1];console.log("FC looping");var c=null===l?new n:l;c.graphics.length>0&&c.removeAll(),c.title="CAD Units";var o=!0,d=!1,u=void 0;try{for(var _,m=t.filtered_cad_data[Symbol.iterator]();!(o=(_=m.next()).done);o=!0){var p=_.value,f={type:"point",longitude:p.longitude,latitude:p.latitude},h=new r({geometry:f,symbol:{type:"simple-marker",color:[0,0,225]}}),v=new r({geometry:f,symbol:{type:"text",color:"black",halo:"white",haloSize:"3px",xoffset:9,yoffset:-2,text:"CAD - "+(p.unitcode.length>0?p.unitcode:p.device_id),horizontalAlignment:"left",font:{size:10}}});c.add(h),c.add(v)}}catch(y){d=!0,u=y}finally{try{o||null==m.return||m.return()}finally{if(d)throw u}}s(c),t.map.add(c)})).catch((function(e){return console.error(e)})),function(){null!==t.map&&t.map.remove(l)}}),[t.map,t.filtered_cad_data]),null},q=function(){var e=Object(n.useRef)(null),t=r.a.useContext(d),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){Object(R.loadModules)(["esri/Map","esri/views/MapView","esri/widgets/BasemapGallery","esri/widgets/LayerList"],{css:!0}).then((function(t){var n=Object(i.a)(t,4),r=n[0],c=n[1],l=n[2],s=n[3],o=new r({basemap:"osm"}),d=new c({container:e.current,map:o,center:[-81.8,29.95],zoom:11}),u=(new l({view:d,container:document.getElementById("basemap_selector_container"),source:{portal:{url:"http://www.arcgis.com",useVectorBasemaps:!1}}}),new s({view:d,source:{portal:{url:"http://www.arcgis.com",useVectorBasemaps:!1}}}));return d.ui.add(u,{position:"top-right"}),d.when((function(){console.log("view.then running"),a({type:"save_map",payload:o}),a({type:"save_map_view",payload:d})})),function(){d&&(d.container=null)}}))}),[]),r.a.createElement("div",{className:"webmap",ref:e},r.a.createElement(Y,null),r.a.createElement(K,null),r.a.createElement(J,null))},Q=function(){function e(){Object(w.a)(this,e),this.label="",this.value=""}return Object(b.a)(e,null,[{key:"GetUnitGroups",value:function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(N("API/Group/GetUnitGroups"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}))}}]),e}(),W=function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch;r.a.useEffect((function(){s(),c(),l(),i(),n()}),[]);var n=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(Q.GetUnitGroups());case 2:return e=t.sent,t.abrupt("return",a({type:"get_unit_groups_data",payload:e}));case 4:case"end":return t.stop()}}))},c=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(k.Get());case 2:return e=t.sent,t.abrupt("return",a({type:"get_avl_data",payload:e}));case 4:case"end":return t.stop()}}))},l=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(U.Get());case 2:return e=t.sent,console.log("fleet complete data",e),t.abrupt("return",a({type:"get_fc_data",payload:e}));case 5:case"end":return t.stop()}}))},i=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(B.Get());case 2:return e=t.sent,console.log("CAD data",e),t.abrupt("return",a({type:"get_cad_data",payload:e}));case 5:case"end":return t.stop()}}))},s=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(V.Get());case 2:return e=t.sent,console.log("Unit data",e),t.abrupt("return",a({type:"get_unit_data",payload:e}));case 5:case"end":return t.stop()}}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement("div",{className:"columns main-container is-mobile"},r.a.createElement("div",{style:{paddingRight:0},className:"column left-side ".concat("map"!==t.current_view?"is-full-mobile is-full-tablet is-full-desktop is-half-widescreen is-half-fullhd":"hide")},"avl"===t.current_view?r.a.createElement(L,null):null,"unit"===t.current_view?r.a.createElement(z,null):null,"fc"===t.current_view?r.a.createElement(I,null):null,"cad"===t.current_view?r.a.createElement(P,null):null),r.a.createElement("div",{style:{paddingLeft:0},className:"column right-side ".concat("map"!==t.current_view?"is-half-widescreen is-half-fullhd":"")},r.a.createElement(q,null))))};l.a.render(r.a.createElement((function(e){var t=Object(n.useReducer)(u,o),a=Object(i.a)(t,2),c=a[0],l=a[1];return r.a.createElement(d.Provider,{value:{state:c,dispatch:l}},e.children)}),null,r.a.createElement(W,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.77b68ff0.chunk.js.map